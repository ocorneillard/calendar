!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return a(e,[{key:"displayMeeting",value:function(e){var t=document.querySelector(".cm .day"+new Date(e.start).getDate());if(t.parentElement.childElementCount<3){var n=document.createElement("div"),r=document.createElement("span"),a=document.createTextNode(new Date(e.start).getHours()+"-"+new Date(e.end).getHours());r.appendChild(a),r.className="time",n.className="event";var i=document.createTextNode(e.name);n.appendChild(r),n.appendChild(i),t.parentElement.appendChild(n)}else if(3===t.parentElement.childElementCount){var o=document.createElement("div"),u=document.createElement("span");u.className="time",o.className="event";var c=document.createTextNode("See more");o.appendChild(u),o.appendChild(c),t.parentElement.appendChild(o)}}},{key:"displayMeetingHours",value:function(e){var t=new Date(e.start).getHours(),n=new Date(e.end).getHours();n=30===new Date(e.start).getMinutes()?n+.5:n,console.log(t+" "+n);for(var r=!0,a=t;a<n;a+=.5){var i=String(a).replace(/\./g,"-");a%2==0&&(o=".h"+a),o=".h"+i,console.log(o);var o=document.querySelector(o);o.style.background="rgba(189,189,189, 0.2)",o.style.borderLeft="2rem solid rgba(189,189,189, 0.6)",!0===r&&(o.innerText=e.name+" - 4persons",r=!1)}}},{key:"fakeDate",value:function(){for(var e=[],t=0;t<100;t++){var n=["Meeting","reunion","party","grouping","End of week"];n=n[Math.floor(4*Math.random())];var r=Math.floor(8e9*Math.random()+1),a=Math.floor(36e6*Math.random()+1),i=new Date(2018,6,0).getTime()+r,o=(new Date).getTime()+r+a,u={name:n,start:i,end:o};e.push(u)}return e}},{key:"month",value:function(e,t){if(t.parentNode.childNodes.length<=3){var n=document.createElement("div"),r=document.createElement("span"),a=document.createTextNode(new Date(e.start).getHours()+"h");r.appendChild(a),r.className="time",n.className="event";var i=document.createTextNode(e.name);n.appendChild(r),n.appendChild(i),t.parentNode.appendChild(n)}}},{key:"oneMeeting",value:function(){var t=document.querySelector(".info");0!==t.childNodes.length&&(t.innerHTML="");var n=e.createDiv(void 0,"card"),r=e.createDiv(void 0,"card__content"),a=e.createDiv("Meeting with..","card__content-primary");r.appendChild(a),n.appendChild(r),t.appendChild(n)}},{key:"oneMeetingDay",value:function(t){var n=document.querySelector(".info");0!==n.childNodes.length&&(n.innerHTML="");var r="Create a meeting at "+t+"hours.",a=e.createDiv(void 0,"card"),i=e.createDiv(void 0,"card__content"),o=e.createDiv(r,"card__content-primary");i.appendChild(o),a.appendChild(i),n.appendChild(a)}}],[{key:"createDiv",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=document.createElement("div");return n.className=t,n.innerText=e,n}}]),e}();t.default=i},function(e,t,n){"use strict";n(2),n(3)},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(4),i=r(a),o=n(5),u=r(o),c=n(6),l=r(c),d=n(0),s=r(d),h=n(7),f=r(h),m=new i.default,y=new u.default,v=new l.default,p=new s.default,g=new f.default,b=document.querySelector(".calendar-days"),D=document.querySelector(".calendar-grid"),w=document.querySelector(".previous--month"),C=document.querySelector(".next--month");["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].forEach(function(e){var t=document.createElement("div");t.className="calendar-day",t.innerText=e,b.appendChild(t)}),m.dayOfCalendar();var M=new Date(m.year,m.month,0).getTime(),T=new Date(m.year,m.month+1,0).getTime();v.getMeeting(M,T),w.addEventListener("click",function(e){if(!0===y.isset)y.prevDay();else{m.prevMonth();var t=new Date(m.year,m.month,0).getTime(),n=new Date(m.year,m.month+1,0).getTime();v.getMeeting(t,n)}e.preventDefault()}),C.addEventListener("click",function(e){if(!0===y.isset)y.nextDay();else{m.nextMonth();var t=new Date(m.year,m.month,0).getTime(),n=new Date(m.year,m.month+1,0).getTime();v.getMeeting(t,n)}e.preventDefault()}),D.addEventListener("click",function(e){if("calendar-grid-day cm"===event.target.className){var t=event.target.childNodes[0].innerText;y.year=m.year,y.displayCalendar(t,m.month);var n=new Date(m.year,m.month,t,8).getTime(),r=new Date(m.year,m.month,Number(t)+1,22).getTime();v.getMeeting(n,r),e.preventDefault()}}),y.CalendarGrid.addEventListener("click",function(e){if("hour-event"===event.target.className.split(" ")[0]&&""===event.target.innerText){var t=parseFloat(event.target.className.split(" ")[1].split("h")[1]);p.oneMeetingDay(t)}e.preventDefault()}),document.querySelector(".add-event").addEventListener("click",function(e){g.isset(),e.preventDefault()})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){r(this,e),this.month=void 0===t?(new Date).getMonth():t,this.year=void 0===n?(new Date).getFullYear():n,this.calendarGrid=document.querySelector(".calendar-grid"),this.calendarTitle=document.querySelector("h1"),this.months=["January","February","March","April","May","June","July","August","September","October","November","December"]}return a(e,[{key:"dayOfCalendar",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.month,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.year;this.titleMonth();var a=new Date(r,n,0),i=new Date(r,n+1,0),o=e.getMonday(a).getDate(),u=a.getDate(),c=i.getDate(),l=7-i.getDay(),d=[u,c,l],s=!1;d.forEach(function(e){for(var r=!1===s?o:1;r<=e;r++)t.displayCalendar(r,e!==d[1]||!1===s?"fadeMonth":"cm"),!0===s&&r===(new Date).getDate()&&n===(new Date).getMonth()&&(document.querySelector(".cm .day"+r).style.background="#00E676");s=!0})}},{key:"displayCalendar",value:function(e,t){var n=document.createElement("div");n.className="calendar-grid-day "+t;var r=document.createElement("div");r.className="daytext day"+e,r.innerText=e,n.appendChild(r),this.calendarGrid.appendChild(n)}},{key:"removeCalendar",value:function(){document.querySelector(".calendar-grid").innerHTML=""}},{key:"nextMonth",value:function(){this.month<11?this.month++:(this.year++,this.month=0),this.removeCalendar(),this.dayOfCalendar(this.month,this.year)}},{key:"prevMonth",value:function(){this.month>0?this.month--:(this.year--,this.month=11),this.removeCalendar(),this.dayOfCalendar(this.month,this.year)}},{key:"titleMonth",value:function(){var e=this,t=document.querySelector("h1");setTimeout(function(){t.innerText="",t.innerText=e.months[e.month]+" "+e.year},50)}}],[{key:"getMonday",value:function(e){e=new Date(e);var t=e.getDay(),n=e.getDate()-t+(0==t?-6:1);return new Date(e.setDate(n))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.main=document.querySelector("main"),this.h1=document.querySelector("h1"),this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.CalendarGrid=document.createElement("div"),this.CalendarGrid.className="calendar-grid-hours",this.isset=!1,this.year=(new Date).getFullYear()}return a(e,[{key:"displayCalendar",value:function(t,n){var r=this;this.day=Number(t),this.month=n,setTimeout(function(){r.main.innerHTML=""},50),this.h1.style.animation="100ms grid cubic-bezier(.25, .8, .25, 1)",setTimeout(function(){r.h1.innerText=e.ordinal_suffix_of(Number(t))+" "+r.months[n]+" "+r.year},100);for(var a=8;a<=22;a+=.5){var i=String(a).replace(/\./g,"-"),o=document.createElement("div");o.className="hours";var u=document.createElement("div");u.className="hour";var c=document.createElement("div");c.className="hour-event h"+i,a%1==0&&(u.innerText=a<12?a+"am":a+"pm",c.style.borderTop="1px solid rgba(189,189,189, 0.4)"),o.appendChild(u),o.appendChild(c),this.CalendarGrid.appendChild(o),document.querySelector("body").appendChild(this.CalendarGrid),this.isset=!0}}},{key:"nextDay",value:function(){var e=new Date(this.year,this.month+1,0);e=e.getDate(),this.day===e?(this.day=1,this.month<11?this.month++:(this.year++,this.month=0)):this.day++,this.CalendarGrid.innerHTML="",this.displayCalendar(this.day,this.month)}},{key:"prevDay",value:function(){if(1===this.day){this.month>0?this.month--:(this.year--,this.month=11);var e=new Date(this.year,this.month+1,0);this.day=e.getDate(),console.log(this.day)}else this.day--;this.CalendarGrid.innerHTML="",this.displayCalendar(this.day,this.month)}}],[{key:"ordinal_suffix_of",value:function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i),u=new o.default,c=function(){function e(){r(this,e)}return a(e,[{key:"get",value:function(e){return new Promise(function(t,n){fetch(e).then(function(e){return e.json()}).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},{key:"post",value:function(e,t){return new Promise(function(n,r){fetch(e,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(e){return r(e)})})}},{key:"put",value:function(e,t){return new Promise(function(n,r){fetch(e,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(e){return r(e)})})}},{key:"delete",value:function(e,t){return new Promise(function(t,n){fetch(e,{method:"DELETE",headers:{"Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return t("Deleted")}).catch(function(e){return n(e)})})}},{key:"getMeeting",value:function(e,t){this.get("https://crud-meetings.azurewebsites.net/api/getAll?start="+e+"&end="+t).then(function(n){t-e==1368e5?n.res.forEach(function(e){u.displayMeetingHours(e)}):n.res.forEach(function(e){u.displayMeeting(e)})}).catch(function(e){return e})}},{key:"addMeeting",value:function(e){this.http.post("https://crud-meetings.azurewebsites.net/api/add?code=JNI0lLs1H53Ug1PeEI33V50P8AVER5cTzaurqm0qI98d0Iulm0sSjw==",e).then(function(e){return e}).catch(function(e){return console.log(e)})}},{key:"updateMeeting",value:function(e,t){this.http.put("https://jsonplaceholder.typicode.com/users/1",t).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},{key:"deleteMeeting",value:function(e){this.http.delete("https://jsonplaceholder.typicode.com/users/1").then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.navbar=document.querySelector(".navbar"),this.header=document.querySelector(".month"),this.btn=document.querySelector(".add-event"),this.login=document.querySelector(".login"),this.log=document.querySelector(".login-login"),this.sign=document.querySelector(".login-signup"),this.form=document.querySelector("form"),this.add=document.querySelector(".add-event")}return a(e,[{key:"isset",value:function(){this.navbar.style.height="30%",this.add.style.transform="rotate(45deg)"}}]),e}();t.default=i}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXNzZXRzL2pzL2FwcC5idW5kbGUuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGQyODQxMDMzNmZiOGZlZWRkMzc2Iiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy92dWUvTWVldGluZy5qcyIsIndlYnBhY2s6Ly8vLi9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvdnVlL0NhbGVuZGFyTW9udGguanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3Z1ZS9DYWxlbmRhckRheS5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvbW9kZWwvU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvdnVlL0FkZE1lZXRpbmcuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJ3cml0YWJsZSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIk1lZXRpbmciLCJ0aGlzIiwicmVzIiwiZGF5VGV4dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIkRhdGUiLCJzdGFydCIsImdldERhdGUiLCJwYXJlbnRFbGVtZW50IiwiY2hpbGRFbGVtZW50Q291bnQiLCJldmVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0aW1lT2ZFdmVudCIsInRpbWVUZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJnZXRIb3VycyIsImVuZCIsImFwcGVuZENoaWxkIiwiY2xhc3NOYW1lIiwibWVldGluZyIsImdldE1pbnV0ZXMiLCJjb25zb2xlIiwibG9nIiwiZmlyc3RUaW1lIiwicmVwbGFjZURvdCIsIlN0cmluZyIsInJlcGxhY2UiLCJzZWxlY3RVSSIsInN0eWxlIiwiYmFja2dyb3VuZCIsImJvcmRlckxlZnQiLCJpbm5lclRleHQiLCJzZW5kcyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInJhbmQiLCJyYW5kMiIsImdldFRpbWUiLCJzZW5kIiwicHVzaCIsInNlbGVjdCIsInBhcmVudE5vZGUiLCJjaGlsZE5vZGVzIiwiaW5mbyIsImlubmVySFRNTCIsImNhcmQiLCJjcmVhdGVEaXYiLCJ1bmRlZmluZWQiLCJjYXJkQ29udGVudCIsImNhcmRQcmltYXJ5IiwiaG91ciIsInR4dCIsInR4dENvbnRlbnQiLCJhcmd1bWVudHMiLCJjc3MiLCJhcHBlbmRSaWdodCIsImRlZmF1bHQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX0NhbGVuZGFyTW9udGgiLCJfQ2FsZW5kYXJNb250aDIiLCJfQ2FsZW5kYXJEYXkiLCJfQ2FsZW5kYXJEYXkyIiwiX1N0b3JhZ2UiLCJfU3RvcmFnZTIiLCJfTWVldGluZyIsIl9NZWV0aW5nMiIsIl9BZGRNZWV0aW5nIiwiX0FkZE1lZXRpbmcyIiwiQ2FsZW5kYXJVSSIsIkNhbGVuZGFyIiwiY2FsZW5kYXJEYXkiLCJDYWxlbmRhckRheSIsInN0b3JhZ2UiLCJTdG9yYWdlIiwiQWRkTWVldGluIiwiQWRkTWVldGluZyIsImNhbGVuZGFyIiwiY2FsZW5kYXJHcmlkIiwicHJldk1vbnRoIiwibmV4dE1vbnRoIiwiZm9yRWFjaCIsImRheSIsImRheU9mQ2FsZW5kYXIiLCJmaXJzdERheSIsInllYXIiLCJtb250aCIsImxhc3REYXkiLCJnZXRNZWV0aW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJpc3NldCIsInByZXZEYXkiLCJwcmV2ZW50RGVmYXVsdCIsIm5leHREYXkiLCJzYXZlRGF5IiwiZGlzcGxheUNhbGVuZGFyIiwiTnVtYmVyIiwiQ2FsZW5kYXJHcmlkIiwic3BsaXQiLCJwYXJzZUZsb2F0Iiwib25lTWVldGluZ0RheSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJjYWxlbmRhclRpdGxlIiwibW9udGhzIiwiX3RoaXMiLCJ0aXRsZU1vbnRoIiwiZmlyc3REYXRlIiwibGFzdERhdGUiLCJmaXJzdE1vbmRheSIsImdldE1vbmRheSIsImZpcnN0RGF0ZU9mTW9udGgiLCJlbmRPZlByZXZNb250aCIsImVuZE9mQ3VycmVudE1vbnRoIiwiZ2V0RGF5IiwiYWxsRGF0ZSIsImNoZWNrRmlyc3RNb250aCIsImRhdGUiLCJibSIsImNyZWF0ZURheSIsInJlbW92ZUNhbGVuZGFyIiwiX3RoaXMyIiwiaDEiLCJzZXRUaW1lb3V0IiwiZGlmZiIsInNldERhdGUiLCJtYWluIiwiYW5pbWF0aW9uIiwib3JkaW5hbF9zdWZmaXhfb2YiLCJob3VycyIsImhvdXJFdmVudCIsImJvcmRlclRvcCIsInNhdmUiLCJqIiwiayIsInVybCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZmV0Y2giLCJ0aGVuIiwianNvbiIsImRhdGEiLCJjYXRjaCIsImVyciIsIm1ldGhvZCIsImhlYWRlcnMiLCJDb250ZW50LXR5cGUiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZyb20iLCJ0byIsInJlc3BvbnNlIiwiZGlzcGxheU1lZXRpbmdIb3VycyIsImRpc3BsYXlNZWV0aW5nIiwiaHR0cCIsInBvc3QiLCJ0aW1lIiwicHV0IiwiaWQiLCJkZWxldGUiLCJuYXZiYXIiLCJoZWFkZXIiLCJidG4iLCJsb2dpbiIsInNpZ24iLCJmb3JtIiwiYWRkIiwiaGVpZ2h0IiwidHJhbnNmb3JtIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBSSxFQUFBSixFQUNBSyxHQUFBLEVBQ0FILFdBVUEsT0FOQUosR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQTRCQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxTQUFBUCxFQUFBUSxFQUFBQyxHQUNBWixFQUFBYSxFQUFBVixFQUFBUSxJQUNBRyxPQUFBQyxlQUFBWixFQUFBUSxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWYsR0FDQSxHQUFBUSxHQUFBUixLQUFBZ0IsV0FDQSxXQUEyQixNQUFBaEIsR0FBQSxTQUMzQixXQUFpQyxNQUFBQSxHQUVqQyxPQURBSixHQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVEsRUFBQUMsR0FBc0QsTUFBQVIsUUFBQVMsVUFBQUMsZUFBQWpCLEtBQUFjLEVBQUFDLElBR3REdEIsRUFBQXlCLEVBQUEsR0FHQXpCLElBQUEwQixFQUFBLEtETU0sU0FBVXRCLEVBQVFELEVBQVNILEdBRWpDLFlBU0EsU0FBUzJCLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBTmhIaEIsT0FBT0MsZUFBZVosRUFBUyxjQUM3QjRCLE9BQU8sR0FHVCxJQUFJQyxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJOUIsR0FBSSxFQUFHQSxFQUFJOEIsRUFBTUMsT0FBUS9CLElBQUssQ0FBRSxHQUFJZ0MsR0FBYUYsRUFBTTlCLEVBQUlnQyxHQUFXcEIsV0FBYW9CLEVBQVdwQixhQUFjLEVBQU9vQixFQUFXckIsY0FBZSxFQUFVLFNBQVdxQixLQUFZQSxFQUFXQyxVQUFXLEdBQU14QixPQUFPQyxlQUFlbUIsRUFBUUcsRUFBV0UsSUFBS0YsSUFBaUIsTUFBTyxVQUFVUixFQUFhVyxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVAsRUFBaUJKLEVBQVlOLFVBQVdpQixHQUFpQkMsR0FBYVIsRUFBaUJKLEVBQWFZLEdBQXFCWixNRTVFM2dCYSxFRmdGUCxXQUNaLFFBQVNBLEtBQ1BmLEVBQWdCZ0IsS0FBTUQsR0FtSXhCLE1BaElBVixHQUFhVSxJQUNYSCxJQUFLLGlCQUNMUixNQUFPLFNFckZNYSxHQUNiLEdBQU1DLEdBQVVDLFNBQVNDLGNBQVQsV0FBa0MsR0FBSUMsTUFBS0osRUFBSUssT0FBT0MsVUFDdEUsSUFBSUwsRUFBUU0sY0FBY0Msa0JBQW9CLEVBQUcsQ0FDL0MsR0FBTUMsR0FBUVAsU0FBU1EsY0FBYyxPQUMvQkMsRUFBY1QsU0FBU1EsY0FBYyxRQUNyQ0UsRUFBV1YsU0FBU1csZUFBZSxHQUFJVCxNQUFLSixFQUFJSyxPQUFPUyxXQUFZLElBQU0sR0FBSVYsTUFBS0osRUFBSWUsS0FBS0QsV0FDakdILEdBQVlLLFlBQVlKLEdBQ3hCRCxFQUFZTSxVQUFZLE9BQ3hCUixFQUFNUSxVQUFZLE9BQ2xCLElBQUlDLEdBQVVoQixTQUFTVyxlQUFlYixFQUFJakMsS0FDMUMwQyxHQUFNTyxZQUFZTCxHQUNsQkYsRUFBTU8sWUFBWUUsR0FDbEJqQixFQUFRTSxjQUFjUyxZQUFZUCxPQUM3QixJQUFnRCxJQUE1Q1IsRUFBUU0sY0FBY0Msa0JBQXlCLENBQ3hELEdBQU1DLEdBQVFQLFNBQVNRLGNBQWMsT0FDL0JDLEVBQWNULFNBQVNRLGNBQWMsT0FDM0NDLEdBQVlNLFVBQVksT0FDeEJSLEVBQU1RLFVBQVksT0FDbEIsSUFBSUMsR0FBVWhCLFNBQVNXLGVBQWUsV0FDdENKLEdBQU1PLFlBQVlMLEdBQ2xCRixFQUFNTyxZQUFZRSxHQUNsQmpCLEVBQVFNLGNBQWNTLFlBQVlQLE9GeUZwQ2QsSUFBSyxzQkFDTFIsTUFBTyxTRXRGV2EsR0FDbEIsR0FBSUssR0FBUSxHQUFJRCxNQUFLSixFQUFJSyxPQUFPUyxXQUM1QkMsRUFBTSxHQUFJWCxNQUFLSixFQUFJZSxLQUFLRCxVQUU1QkMsR0FBa0IsS0FESixHQUFJWCxNQUFLSixFQUFJSyxPQUFPYyxhQUNYSixFQUFNLEdBQU1BLEVBQ25DSyxRQUFRQyxJQUFJaEIsRUFBUSxJQUFNVSxFQUcxQixLQUFLLEdBRkRPLElBQVksRUFFUDdELEVBQUk0QyxFQUFPNUMsRUFBSXNELEVBQUt0RCxHQUFRLEdBQUssQ0FDeEMsR0FBSThELEdBQWFDLE9BQU8vRCxHQUFHZ0UsUUFBUSxNQUFNLElBQ3JDaEUsR0FBSSxHQUFNLElBQ1ppRSxPQUFnQmpFLEdBRWxCaUUsT0FBZ0JILEVBQ2hCSCxRQUFRQyxJQUFJSyxFQUNaLElBQUlBLEdBQVd4QixTQUFTQyxjQUFjdUIsRUFDdENBLEdBQVNDLE1BQU1DLFdBQWEseUJBQzVCRixFQUFTQyxNQUFNRSxXQUFhLHFDQUNWLElBQWRQLElBQ0ZJLEVBQVNJLFVBQWU5QixFQUFJakMsS0FBNUIsY0FDQXVELEdBQVksT0YyRmhCM0IsSUFBSyxXQUNMUixNQUFPLFdFckZQLElBQUssR0FERDRDLE1BQ0t0RSxFQUFJLEVBQUdBLEVBQUksSUFBS0EsSUFBSyxDQUM1QixHQUFJTSxJQUFRLFVBQVcsVUFBVyxRQUFTLFdBQVksY0FFdERBLEdBQU9BLEVBRE9pRSxLQUFLQyxNQUF1QixFQUFoQkQsS0FBS0UsVUFFaEMsSUFBSUMsR0FBT0gsS0FBS0MsTUFBdUIsSUFBaEJELEtBQUtFLFNBQXlCLEdBQ2pERSxFQUFRSixLQUFLQyxNQUF1QixLQUFoQkQsS0FBS0UsU0FBdUIsR0FDaEQ3QixFQUFRLEdBQUlELE1BQUssS0FBSyxFQUFFLEdBQUdpQyxVQUFZRixFQUN2Q3BCLEdBQU0sR0FBSVgsT0FBT2lDLFVBQVlGLEVBQU9DLEVBQ3BDRSxHQUFRdkUsT0FBTXNDLFFBQU9VLE1BQ3pCZ0IsR0FBTVEsS0FBS0QsR0FFYixNQUFPUCxNRjBGUHBDLElBQUssUUFDTFIsTUFBTyxTRXhGSG1ELEVBQU1FLEdBQ1IsR0FBSUEsRUFBT0MsV0FBV0MsV0FBV2xELFFBQVUsRUFBRyxDQUM5QyxHQUFNaUIsR0FBUVAsU0FBU1EsY0FBYyxPQUMvQkMsRUFBY1QsU0FBU1EsY0FBYyxRQUNyQ0UsRUFBV1YsU0FBU1csZUFBZSxHQUFJVCxNQUFLa0MsRUFBS2pDLE9BQU9TLFdBQWEsSUFDM0VILEdBQVlLLFlBQVlKLEdBQ3hCRCxFQUFZTSxVQUFZLE9BQ3hCUixFQUFNUSxVQUFZLE9BQ2xCLElBQUlDLEdBQVVoQixTQUFTVyxlQUFleUIsRUFBS3ZFLEtBQzNDMEMsR0FBTU8sWUFBWUwsR0FDbEJGLEVBQU1PLFlBQVlFLEdBQ2xCc0IsRUFBT0MsV0FBV3pCLFlBQVlQLE9GNEZoQ2QsSUFBSyxhQUNMUixNQUFPLFdFeEZQLEdBQU13RCxHQUFPekMsU0FBU0MsY0FBYyxRQUNKLEtBQTNCd0MsRUFBS0QsV0FBV2xELFNBQ25CbUQsRUFBS0MsVUFBWSxHQUVuQixJQUNJQyxHQUFPL0MsRUFBUWdELGNBQVVDLEdBQVcsUUFDcENDLEVBQWNsRCxFQUFRZ0QsY0FBVUMsR0FBVyxpQkFDM0NFLEVBQWNuRCxFQUFRZ0QsVUFIaEIsaUJBRytCLHdCQUN6Q0UsR0FBWWhDLFlBQVlpQyxHQUN4QkosRUFBSzdCLFlBQVlnQyxHQUNqQkwsRUFBSzNCLFlBQVk2QixNRjRGakJsRCxJQUFLLGdCQUNMUixNQUFPLFNFMUZLK0QsR0FDWixHQUFNUCxHQUFPekMsU0FBU0MsY0FBYyxRQUNKLEtBQTNCd0MsRUFBS0QsV0FBV2xELFNBQ25CbUQsRUFBS0MsVUFBWSxHQUVuQixJQUFJTyxHQUFNLHVCQUF5QkQsRUFBTyxTQUN0Q0wsRUFBTy9DLEVBQVFnRCxjQUFVQyxHQUFXLFFBQ3BDQyxFQUFjbEQsRUFBUWdELGNBQVVDLEdBQVcsaUJBQzNDRSxFQUFjbkQsRUFBUWdELFVBQVVLLEVBQUssd0JBQ3pDSCxHQUFZaEMsWUFBWWlDLEdBQ3hCSixFQUFLN0IsWUFBWWdDLEdBQ2pCTCxFQUFLM0IsWUFBWTZCLFFGNkZqQmxELElBQUssWUFDTFIsTUFBTyxXRXpGOEIsR0FBdEJpRSxHQUFzQkMsVUFBQTdELE9BQUEsT0FBQXVELEtBQUFNLFVBQUEsR0FBQUEsVUFBQSxHQUFULEdBQUlDLEVBQUtELFVBQUEsR0FDakNFLEVBQWNyRCxTQUFTUSxjQUFjLE1BR3pDLE9BRkE2QyxHQUFZdEMsVUFBWXFDLEVBQ3hCQyxFQUFZekIsVUFBWXNCLEVBQ2pCRyxNRmdHRnpELElBR1R2QyxHQUFRaUcsUUV4TmExRCxHRjROZixTQUFVdEMsRUFBUUQsRUFBU0gsR0FFakMsWUc5TkFBLEdBQUEsR0FDQUEsRUFBQSxJSHNPTSxTQUFVSSxFQUFRRCxLQU1sQixTQUFVQyxFQUFRRCxFQUFTSCxHQUVqQyxZQXVCQSxTQUFTcUcsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSWxGLFdBQWFrRixHQUFRRixRQUFTRSxHSXRRdkYsR0FBQUMsR0FBQXZHLEVBQUEsR0pvUEl3RyxFQUFrQkgsRUFBdUJFLEdJblA3Q0UsRUFBQXpHLEVBQUEsR0p1UEkwRyxFQUFnQkwsRUFBdUJJLEdJdFAzQ0UsRUFBQTNHLEVBQUEsR0owUEk0RyxFQUFZUCxFQUF1Qk0sR0l6UHZDRSxFQUFBN0csRUFBQSxHSjZQSThHLEVBQVlULEVBQXVCUSxHSTVQdkNFLEVBQUEvRyxFQUFBLEdKZ1FJZ0gsRUFBZVgsRUFBdUJVLEdJOVBwQ0UsRUFBYSxHQUFJQyxXQUNuQkMsRUFBYyxHQUFJQyxXQUNsQkMsRUFBVSxHQUFJQyxXQUNkeEQsRUFBVSxHQUFJcEIsV0FDZDZFLEVBQVksR0FBSUMsV0FHZEMsRUFBVzNFLFNBQVNDLGNBQWMsa0JBQ2xDMkUsRUFBZTVFLFNBQVNDLGNBQWMsa0JBQ3RDNEUsRUFBWTdFLFNBQVNDLGNBQWMsb0JBQ25DNkUsRUFBWTlFLFNBQVNDLGNBQWMsaUJBQzNCLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BRTdDOEUsUUFBUyxTQUFDQyxHQUNiLEdBQUlYLEdBQWNyRSxTQUFTUSxjQUFjLE1BQ3pDNkQsR0FBWXRELFVBQVksZUFDeEJzRCxFQUFZekMsVUFBWW9ELEVBQ3hCTCxFQUFTN0QsWUFBWXVELEtBRXZCRixFQUFXYyxlQUNYLElBQUlDLEdBQVcsR0FBSWhGLE1BQUtpRSxFQUFXZ0IsS0FBTWhCLEVBQVdpQixNQUFPLEdBQUdqRCxVQUMxRGtELEVBQVUsR0FBSW5GLE1BQUtpRSxFQUFXZ0IsS0FBTWhCLEVBQVdpQixNQUFNLEVBQUcsR0FBR2pELFNBQy9Eb0MsR0FBUWUsV0FBV0osRUFBVUcsR0FHN0JSLEVBQVVVLGlCQUFpQixRQUFTLFNBQUNDLEdBRW5DLElBQTBCLElBQXRCbkIsRUFBWW9CLE1BQ2RwQixFQUFZcUIsY0FDUCxDQUNMdkIsRUFBV1UsV0FDWCxJQUFJSyxHQUFXLEdBQUloRixNQUFLaUUsRUFBV2dCLEtBQU1oQixFQUFXaUIsTUFBTyxHQUFHakQsVUFDMURrRCxFQUFVLEdBQUluRixNQUFLaUUsRUFBV2dCLEtBQU1oQixFQUFXaUIsTUFBTSxFQUFHLEdBQUdqRCxTQUMvRG9DLEdBQVFlLFdBQVdKLEVBQVVHLEdBRS9CRyxFQUFFRyxtQkFHSmIsRUFBVVMsaUJBQWlCLFFBQVMsU0FBQ0MsR0FFbkMsSUFBMEIsSUFBdEJuQixFQUFZb0IsTUFDZHBCLEVBQVl1QixjQUNQLENBQ0x6QixFQUFXVyxXQUNYLElBQUlJLEdBQVcsR0FBSWhGLE1BQUtpRSxFQUFXZ0IsS0FBTWhCLEVBQVdpQixNQUFPLEdBQUdqRCxVQUMxRGtELEVBQVUsR0FBSW5GLE1BQUtpRSxFQUFXZ0IsS0FBTWhCLEVBQVdpQixNQUFNLEVBQUcsR0FBR2pELFNBQy9Eb0MsR0FBUWUsV0FBV0osRUFBVUcsR0FFL0JHLEVBQUVHLG1CQUdKZixFQUFhVyxpQkFBaUIsUUFBUyxTQUFDQyxHQUN0QyxHQUErQix5QkFBM0JqRixNQUFNbkIsT0FBTzJCLFVBQXNDLENBQ3JELEdBQUk4RSxHQUFVdEYsTUFBTW5CLE9BQU9vRCxXQUFXLEdBQUdaLFNBQ3pDeUMsR0FBWWMsS0FBT2hCLEVBQVdnQixLQUM5QmQsRUFBWXlCLGdCQUFnQkQsRUFBUzFCLEVBQVdpQixNQUNoRCxJQUFJRixHQUFXLEdBQUloRixNQUFLaUUsRUFBV2dCLEtBQU1oQixFQUFXaUIsTUFBT1MsRUFBUyxHQUFHMUQsVUFDbkVrRCxFQUFVLEdBQUluRixNQUFLaUUsRUFBV2dCLEtBQU1oQixFQUFXaUIsTUFBUVcsT0FBT0YsR0FBVSxFQUFJLElBQUkxRCxTQUNwRm9DLEdBQVFlLFdBQVdKLEVBQVVHLEdBQzdCRyxFQUFFRyxvQkFRTnRCLEVBQVkyQixhQUFhVCxpQkFBaUIsUUFBUyxTQUFDQyxHQUNsRCxHQUE2QyxlQUF6Q2pGLE1BQU1uQixPQUFPMkIsVUFBVWtGLE1BQU0sS0FBSyxJQUFrRCxLQUEzQjFGLE1BQU1uQixPQUFPd0MsVUFBa0IsQ0FDMUYsR0FBSW9CLEdBQU9rRCxXQUFXM0YsTUFBTW5CLE9BQU8yQixVQUFVa0YsTUFBTSxLQUFLLEdBQUdBLE1BQU0sS0FBSyxHQUN0RWpGLEdBQVFtRixjQUFjbkQsR0FFeEJ3QyxFQUFFRyxtQkFPZTNGLFNBQVNDLGNBQWMsY0FDL0JzRixpQkFBaUIsUUFBUyxTQUFDQyxHQUNwQ2YsRUFBVWdCLFFBQ1ZELEVBQUVHLG9CSm9RRSxTQUFVckksRUFBUUQsRUFBU0gsR0FFakMsWUFTQSxTQUFTMkIsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FOaEhoQixPQUFPQyxlQUFlWixFQUFTLGNBQzdCNEIsT0FBTyxHQUdULElBQUlDLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUk5QixHQUFJLEVBQUdBLEVBQUk4QixFQUFNQyxPQUFRL0IsSUFBSyxDQUFFLEdBQUlnQyxHQUFhRixFQUFNOUIsRUFBSWdDLEdBQVdwQixXQUFhb0IsRUFBV3BCLGFBQWMsRUFBT29CLEVBQVdyQixjQUFlLEVBQVUsU0FBV3FCLEtBQVlBLEVBQVdDLFVBQVcsR0FBTXhCLE9BQU9DLGVBQWVtQixFQUFRRyxFQUFXRSxJQUFLRixJQUFpQixNQUFPLFVBQVVSLEVBQWFXLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZUCxFQUFpQkosRUFBWU4sVUFBV2lCLEdBQWlCQyxHQUFhUixFQUFpQkosRUFBYVksR0FBcUJaLE1LclczZ0JxRixFTHlXTixXS3ZXYixRQUFBQSxHQUFZZ0IsRUFBTUQsR0FBTXRHLEVBQUFnQixLQUFBdUUsR0FDdEJ2RSxLQUFLdUYsVUFBaUJ2QyxLQUFUdUMsR0FBcUIsR0FBSWxGLE9BQU9rRyxXQUFhaEIsRUFDMUR2RixLQUFLc0YsU0FBZXRDLEtBQVJzQyxHQUFvQixHQUFJakYsT0FBT21HLGNBQWdCbEIsRUFDM0R0RixLQUFLK0UsYUFBZTVFLFNBQVNDLGNBQWMsa0JBQzNDSixLQUFLeUcsY0FBZ0J0RyxTQUFTQyxjQUFjLE1BQzVDSixLQUFLMEcsUUFBVSxVQUFXLFdBQVksUUFBUyxRQUFTLE1BQU8sT0FBUSxPQUFRLFNBQVUsWUFBYSxVQUFXLFdBQVksWUwyYy9ILE1BOUZBckgsR0FBYWtGLElBQ1gzRSxJQUFLLGdCQUNMUixNQUFPLFdLcFcyQyxHQUFBdUgsR0FBQTNHLEtBQXRDdUYsRUFBc0NqQyxVQUFBN0QsT0FBQSxPQUFBdUQsS0FBQU0sVUFBQSxHQUFBQSxVQUFBLEdBQTlCdEQsS0FBS3VGLE1BQU9ELEVBQWtCaEMsVUFBQTdELE9BQUEsT0FBQXVELEtBQUFNLFVBQUEsR0FBQUEsVUFBQSxHQUFYdEQsS0FBS3NGLElBQzVDdEYsTUFBSzRHLFlBQ0wsSUFBSUMsR0FBVyxHQUFJeEcsTUFBS2lGLEVBQU1DLEVBQU8sR0FDckN1QixFQUFVLEdBQUl6RyxNQUFLaUYsRUFBTUMsRUFBTSxFQUFHLEdBQ2xDd0IsRUFBY3hDLEVBQVN5QyxVQUFVSCxHQUFXdEcsVUFFdEMwRyxFQUFtQkosRUFBVXRHLFVBQzdCMkcsRUFBaUJKLEVBQVN2RyxVQUMxQjRHLEVBQW9CLEVBQUlMLEVBQVNNLFNBRW5DQyxHQUFXSixFQUFrQkMsRUFBZ0JDLEdBQzdDRyxHQUFrQixDQUN0QkQsR0FBUW5DLFFBQVEsU0FBQ3FDLEdBQ2IsSUFBSyxHQUFJN0osSUFBd0IsSUFBcEI0SixFQUE0QlAsRUFBYyxFQUFHckosR0FBSzZKLEVBQU03SixJQUNuRWlKLEVBQUtWLGdCQUFnQnZJLEVBQUc2SixJQUFTRixFQUFRLEtBQTBCLElBQXBCQyxFQUE0QixZQUFjLE9BQ2pFLElBQXBCQSxHQUE0QjVKLEtBQU0sR0FBSTJDLE9BQU9FLFdBQWFnRixLQUFVLEdBQUlsRixPQUFPa0csYUFDakZwRyxTQUFTQyxjQUFULFdBQWtDMUMsR0FBS2tFLE1BQU1DLFdBQWEsVUFHOUR5RixJQUFrQixPTDZXdEIxSCxJQUFLLGtCQUNMUixNQUFPLFNLeldPK0YsRUFBS3FDLEdBRW5CLEdBQU1DLEdBQVl0SCxTQUFTUSxjQUFjLE1BQ3pDOEcsR0FBVXZHLFVBQVYscUJBQTJDc0csQ0FDM0MsSUFBTXRILEdBQVVDLFNBQVNRLGNBQWMsTUFDdkNULEdBQVFnQixVQUFSLGNBQWtDaUUsRUFDbENqRixFQUFRNkIsVUFBWW9ELEVBQ3BCc0MsRUFBVXhHLFlBQVlmLEdBQ3RCRixLQUFLK0UsYUFBYTlELFlBQVl3RyxNTDRXOUI3SCxJQUFLLGlCQUNMUixNQUFPLFdLeldMZSxTQUFTQyxjQUFjLGtCQUFrQnlDLFVBQVksTUw2V3ZEakQsSUFBSyxZQUNMUixNQUFPLFdLeldEWSxLQUFLdUYsTUFBUSxHQUNmdkYsS0FBS3VGLFNBRUx2RixLQUFLc0YsT0FDTHRGLEtBQUt1RixNQUFRLEdBRWZ2RixLQUFLMEgsaUJBQ0wxSCxLQUFLb0YsY0FBY3BGLEtBQUt1RixNQUFPdkYsS0FBS3NGLFNMOFd0QzFGLElBQUssWUFDTFIsTUFBTyxXSzFXSFksS0FBS3VGLE1BQVEsRUFDZnZGLEtBQUt1RixTQUVMdkYsS0FBS3NGLE9BQ0x0RixLQUFLdUYsTUFBUSxJQUVmdkYsS0FBSzBILGlCQUNMMUgsS0FBS29GLGNBQWNwRixLQUFLdUYsTUFBT3ZGLEtBQUtzRixTTCtXcEMxRixJQUFLLGFBQ0xSLE1BQU8sV0s3V0ksR0FBQXVJLEdBQUEzSCxLQUVMNEgsRUFBS3pILFNBQVNDLGNBQWMsS0FDbEN5SCxZQUFXLFdBQ1RELEVBQUc3RixVQUFZLEdBQ2Y2RixFQUFHN0YsVUFBWTRGLEVBQUtqQixPQUFRaUIsRUFBS3BDLE9BQVUsSUFBTW9DLEVBQUtyQyxNQUNyRCxTTGlYSDFGLElBQUssWUFDTFIsTUFBTyxTSy9iUXJCLEdBRWZBLEVBQUksR0FBSXNDLE1BQUt0QyxFQUNiLElBQUlvSCxHQUFNcEgsRUFBRXFKLFNBQ1JVLEVBQU8vSixFQUFFd0MsVUFBWTRFLEdBQWMsR0FBUEEsR0FBWSxFQUFFLEVBQzlDLE9BQU8sSUFBSTlFLE1BQUt0QyxFQUFFZ0ssUUFBUUQsUUxtY3JCdkQsSUFHVC9HLEdBQVFpRyxRS3JkYWMsR0x5ZGYsU0FBVTlHLEVBQVFELEVBQVNILEdBRWpDLFlBU0EsU0FBUzJCLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBTmhIaEIsT0FBT0MsZUFBZVosRUFBUyxjQUM3QjRCLE9BQU8sR0FHVCxJQUFJQyxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJOUIsR0FBSSxFQUFHQSxFQUFJOEIsRUFBTUMsT0FBUS9CLElBQUssQ0FBRSxHQUFJZ0MsR0FBYUYsRUFBTTlCLEVBQUlnQyxHQUFXcEIsV0FBYW9CLEVBQVdwQixhQUFjLEVBQU9vQixFQUFXckIsY0FBZSxFQUFVLFNBQVdxQixLQUFZQSxFQUFXQyxVQUFXLEdBQU14QixPQUFPQyxlQUFlbUIsRUFBUUcsRUFBV0UsSUFBS0YsSUFBaUIsTUFBTyxVQUFVUixFQUFhVyxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVAsRUFBaUJKLEVBQVlOLFVBQVdpQixHQUFpQkMsR0FBYVIsRUFBaUJKLEVBQWFZLEdBQXFCWixNTWxlM2dCdUYsRU5zZUgsV01yZWhCLFFBQUFBLEtBQWN6RixFQUFBZ0IsS0FBQXlFLEdBQ1p6RSxLQUFLZ0ksS0FBTzdILFNBQVNDLGNBQWMsUUFDbkNKLEtBQUs0SCxHQUFLekgsU0FBU0MsY0FBYyxNQUNqQ0osS0FBSzBHLFFBQVUsVUFBVyxXQUFZLFFBQVMsUUFBUyxNQUFPLE9BQVEsT0FBUSxTQUFVLFlBQWEsVUFBVyxXQUFZLFlBQzdIMUcsS0FBS21HLGFBQWVoRyxTQUFTUSxjQUFjLE9BQzNDWCxLQUFLbUcsYUFBYWpGLFVBQVksc0JBRTlCbEIsS0FBSzRGLE9BQVEsRUFDYjVGLEtBQUtzRixNQUFPLEdBQUlqRixPQUFPbUcsY05vbEJ6QixNQXpHQW5ILEdBQWFvRixJQUNYN0UsSUFBSyxrQkFDTFIsTUFBTyxTTTFlTytGLEVBQUtJLEdBQU8sR0FBQW9CLEdBQUEzRyxJQUMxQkEsTUFBS21GLElBQU1lLE9BQU9mLEdBQ2xCbkYsS0FBS3VGLE1BQVFBLEVBQ2JzQyxXQUFXLFdBQ1RsQixFQUFLcUIsS0FBS25GLFVBQVksSUFDckIsSUFDSDdDLEtBQUs0SCxHQUFHaEcsTUFBTXFHLFVBQVksMkNBQzFCSixXQUFXLFdBQ1RsQixFQUFLaUIsR0FBRzdGLFVBQVkwQyxFQUFZeUQsa0JBQWtCaEMsT0FBT2YsSUFBUSxJQUFNd0IsRUFBS0QsT0FBT25CLEdBQVMsSUFBTW9CLEVBQUtyQixNQUN0RyxJQUVILEtBQUssR0FBSTVILEdBQUksRUFBR0EsR0FBSyxHQUFJQSxHQUFRLEdBQUssQ0FDdEMsR0FBSThELEdBQWFDLE9BQU8vRCxHQUFHZ0UsUUFBUSxNQUFNLEtBQ3JDeUcsRUFBUWhJLFNBQVNRLGNBQWMsTUFDbkN3SCxHQUFNakgsVUFBWSxPQUNsQixJQUFJaUMsR0FBT2hELFNBQVNRLGNBQWMsTUFDbEN3QyxHQUFLakMsVUFBWSxNQUNqQixJQUFJa0gsR0FBWWpJLFNBQVNRLGNBQWMsTUFDdkN5SCxHQUFVbEgsVUFBVixlQUFxQ00sRUFDakM5RCxFQUFJLEdBQU0sSUFFVnlGLEVBQUtwQixVQURIckUsRUFBSSxHQUNjQSxFQUFwQixLQUVvQkEsRUFBcEIsS0FFRjBLLEVBQVV4RyxNQUFNeUcsVUFBWSxvQ0FHOUJGLEVBQU1sSCxZQUFZa0MsR0FDbEJnRixFQUFNbEgsWUFBWW1ILEdBQ2xCcEksS0FBS21HLGFBQWFsRixZQUFZa0gsR0FDOUJoSSxTQUFTQyxjQUFjLFFBQVFhLFlBQVlqQixLQUFLbUcsY0FDaERuRyxLQUFLNEYsT0FBUSxNTmdmYmhHLElBQUssVUFDTFIsTUFBTyxXTTVkUCxHQUFJa0osR0FBTyxHQUFJakksTUFBS0wsS0FBS3NGLEtBQU10RixLQUFLdUYsTUFBUSxFQUFHLEVBQy9DK0MsR0FBT0EsRUFBSy9ILFVBQ1JQLEtBQUttRixNQUFRbUQsR0FDZnRJLEtBQUttRixJQUFNLEVBRVBuRixLQUFLdUYsTUFBUSxHQUNmdkYsS0FBS3VGLFNBRUx2RixLQUFLc0YsT0FDTHRGLEtBQUt1RixNQUFRLElBR2Z2RixLQUFLbUYsTUFFUG5GLEtBQUttRyxhQUFhdEQsVUFBWSxHQUM5QjdDLEtBQUtpRyxnQkFBZ0JqRyxLQUFLbUYsSUFBS25GLEtBQUt1RixVTmllcEMzRixJQUFLLFVBQ0xSLE1BQU8sV005ZFAsR0FBaUIsSUFBYlksS0FBS21GLElBQVcsQ0FFZG5GLEtBQUt1RixNQUFRLEVBQ2Z2RixLQUFLdUYsU0FFTHZGLEtBQUtzRixPQUNMdEYsS0FBS3VGLE1BQVEsR0FFZixJQUFJK0MsR0FBTyxHQUFJakksTUFBS0wsS0FBS3NGLEtBQU10RixLQUFLdUYsTUFBUSxFQUFHLEVBQy9DdkYsTUFBS21GLElBQU1tRCxFQUFLL0gsVUFDaEJjLFFBQVFDLElBQUl0QixLQUFLbUYsU0FFakJuRixNQUFLbUYsS0FFUG5GLE1BQUttRyxhQUFhdEQsVUFBWSxHQUM5QjdDLEtBQUtpRyxnQkFBZ0JqRyxLQUFLbUYsSUFBS25GLEtBQUt1RixZTnllcEMzRixJQUFLLG9CQUNMUixNQUFPLFNNN2hCZ0IxQixHQUN2QixHQUFJNkssR0FBSTdLLEVBQUksR0FDUjhLLEVBQUk5SyxFQUFJLEdBQ1osT0FBUyxJQUFMNkssR0FBZSxJQUFMQyxFQUNIOUssRUFBSSxLQUVOLEdBQUw2SyxHQUFlLElBQUxDLEVBQ0g5SyxFQUFJLEtBRU4sR0FBTDZLLEdBQWUsSUFBTEMsRUFDSDlLLEVBQUksS0FFUkEsRUFBSSxTTmlpQk4rRyxJQUdUakgsR0FBUWlHLFFNaG1CYWdCLEdOb21CZixTQUFVaEgsRUFBUUQsRUFBU0gsR0FFakMsWUFlQSxTQUFTMkIsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FaaEhoQixPQUFPQyxlQUFlWixFQUFTLGNBQzdCNEIsT0FBTyxHQUdULElBQUlDLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUk5QixHQUFJLEVBQUdBLEVBQUk4QixFQUFNQyxPQUFRL0IsSUFBSyxDQUFFLEdBQUlnQyxHQUFhRixFQUFNOUIsRUFBSWdDLEdBQVdwQixXQUFhb0IsRUFBV3BCLGFBQWMsRUFBT29CLEVBQVdyQixjQUFlLEVBQVUsU0FBV3FCLEtBQVlBLEVBQVdDLFVBQVcsR0FBTXhCLE9BQU9DLGVBQWVtQixFQUFRRyxFQUFXRSxJQUFLRixJQUFpQixNQUFPLFVBQVVSLEVBQWFXLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZUCxFQUFpQkosRUFBWU4sVUFBV2lCLEdBQWlCQyxHQUFhUixFQUFpQkosRUFBYVksR0FBcUJaLE1PN21CaGlCZ0YsRUFBQTdHLEVBQUEsR1BpbkJJOEcsRUFFSixTQUFnQ1IsR0FBTyxNQUFPQSxJQUFPQSxFQUFJbEYsV0FBYWtGLEdBQVFGLFFBQVNFLElBRmhETyxHT2huQm5DckcsRUFBSSxHQUFJa0MsV0FDUzRFLEVQdW5CUCxXQUNaLFFBQVNBLEtBQ1AzRixFQUFnQmdCLEtBQU0yRSxHQW1JeEIsTUFoSUF0RixHQUFhc0YsSUFDWC9FLElBQUssTUFDTFIsTUFBTyxTTzVuQkxxSixHQUNGLE1BQU8sSUFBSUMsU0FBUSxTQUFDQyxFQUFTQyxHQUM3QkMsTUFBTUosR0FDSEssS0FBSyxTQUFBN0ksR0FBQSxNQUFPQSxHQUFJOEksU0FDaEJELEtBQUssU0FBQUUsR0FBQSxNQUFRTCxHQUFRSyxLQUNyQkMsTUFBTSxTQUFBQyxHQUFBLE1BQU9OLEdBQU9NLFVQbW9CdkJ0SixJQUFLLE9BQ0xSLE1BQU8sU08vbkJKcUosRUFBS08sR0FDUixNQUFPLElBQUlOLFNBQVEsU0FBQ0MsRUFBU0MsR0FDM0JDLE1BQU1KLEdBQ0pVLE9BQVMsT0FDVEMsU0FDRUMsZUFBZ0Isb0JBRWxCQyxLQUFNQyxLQUFLQyxVQUFVUixLQUV0QkYsS0FBSyxTQUFBN0ksR0FBQSxNQUFPQSxHQUFJOEksU0FDaEJELEtBQUssU0FBQUUsR0FBQSxNQUFRTCxHQUFRSyxLQUNyQkMsTUFBTSxTQUFBQyxHQUFBLE1BQU9OLEdBQU9NLFVQc29CdkJ0SixJQUFLLE1BQ0xSLE1BQU8sU09ub0JMcUosRUFBSU8sR0FDTixNQUFPLElBQUlOLFNBQVEsU0FBQ0MsRUFBUUMsR0FDMUJDLE1BQU1KLEdBQ0pVLE9BQVMsTUFDVEMsU0FDRUMsZUFBZ0Isb0JBRWxCQyxLQUFNQyxLQUFLQyxVQUFVUixLQUVwQkYsS0FBSyxTQUFBN0ksR0FBQSxNQUFPQSxHQUFJOEksU0FDaEJELEtBQU0sU0FBQUUsR0FBQSxNQUFRTCxHQUFRSyxLQUN0QkMsTUFBTSxTQUFBQyxHQUFBLE1BQU9OLEdBQU9NLFVQNm9CekJ0SixJQUFLLFNBQ0xSLE1BQU8sU096b0JGcUosRUFBS08sR0FDVixNQUFPLElBQUlOLFNBQVEsU0FBQ0MsRUFBUUMsR0FDMUJDLE1BQU1KLEdBQ0pVLE9BQVMsU0FDVEMsU0FDRUMsZUFBZ0Isc0JBR2pCUCxLQUFLLFNBQUE3SSxHQUFBLE1BQU9BLEdBQUk4SSxTQUNoQkQsS0FBTSxTQUFBRSxHQUFBLE1BQVFMLEdBQVEsYUFDdEJNLE1BQU0sU0FBQUMsR0FBQSxNQUFPTixHQUFPTSxVUHdwQnpCdEosSUFBSyxhQUNMUixNQUFPLFNPL29CRXFLLEVBQU1DLEdBQ2YxSixLQUFLekIsSUFBTCw0REFBcUVrTCxFQUFyRSxRQUFpRkMsR0FDaEZaLEtBQU0sU0FBQ2EsR0FDRkQsRUFBS0QsR0FBUyxPQUNoQkUsRUFBUzFKLElBQUlpRixRQUFRLFNBQUNqRixHQUN0QnBDLEVBQUUrTCxvQkFBb0IzSixLQUd0QjBKLEVBQVMxSixJQUFJaUYsUUFBUyxTQUFDakYsR0FDdkJwQyxFQUFFZ00sZUFBZTVKLE9BSXBCZ0osTUFBTyxTQUFDQyxHQUNMLE1BQU9BLFFQaXBCWHRKLElBQUssYUFDTFIsTUFBTyxTTzlvQkU0SixHQUVUaEosS0FBSzhKLEtBQUtDLEtBQUssZ0hBQWlIZixHQUMvSEYsS0FBSyxTQUFBRSxHQUFBLE1BQVFBLEtBQ2JDLE1BQU0sU0FBQUMsR0FBQSxNQUFPN0gsU0FBUUMsSUFBSTRILFFQbXBCMUJ0SixJQUFLLGdCQUNMUixNQUFPLFNPanBCSzRLLEVBQU1oQixHQUVsQmhKLEtBQUs4SixLQUFLRyxJQUFJLCtDQUFnRGpCLEdBQzdERixLQUFLLFNBQUFFLEdBQUEsTUFBUTNILFNBQVFDLElBQUkwSCxLQUN6QkMsTUFBTSxTQUFBQyxHQUFBLE1BQU83SCxTQUFRQyxJQUFJNEgsUVBzcEIxQnRKLElBQUssZ0JBQ0xSLE1BQU8sU09wcEJLOEssR0FDWmxLLEtBQUs4SixLQUFLSyxPQUFPLGdEQUNoQnJCLEtBQUssU0FBQUUsR0FBQSxNQUFRM0gsU0FBUUMsSUFBSTBILEtBQ3pCQyxNQUFNLFNBQUFDLEdBQUEsTUFBTzdILFNBQVFDLElBQUk0SCxTUDBwQnJCdkUsSUFHVG5ILEdBQVFpRyxRTy92QmFrQixHUG13QmYsU0FBVWxILEVBQVFELEVBQVNILEdBRWpDLFlBU0EsU0FBUzJCLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBTmhIaEIsT0FBT0MsZUFBZVosRUFBUyxjQUM3QjRCLE9BQU8sR0FHVCxJQUFJQyxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJOUIsR0FBSSxFQUFHQSxFQUFJOEIsRUFBTUMsT0FBUS9CLElBQUssQ0FBRSxHQUFJZ0MsR0FBYUYsRUFBTTlCLEVBQUlnQyxHQUFXcEIsV0FBYW9CLEVBQVdwQixhQUFjLEVBQU9vQixFQUFXckIsY0FBZSxFQUFVLFNBQVdxQixLQUFZQSxFQUFXQyxVQUFXLEdBQU14QixPQUFPQyxlQUFlbUIsRUFBUUcsRUFBV0UsSUFBS0YsSUFBaUIsTUFBTyxVQUFVUixFQUFhVyxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVAsRUFBaUJKLEVBQVlOLFVBQVdpQixHQUFpQkMsR0FBYVIsRUFBaUJKLEVBQWFZLEdBQXFCWixNUTl3QjNnQjJGLEVSa3hCSixXUWp4QmYsUUFBQUEsS0FBYzdGLEVBQUFnQixLQUFBNkUsR0FDWjdFLEtBQUtvSyxPQUFTakssU0FBU0MsY0FBYyxXQUNyQ0osS0FBS3FLLE9BQVNsSyxTQUFTQyxjQUFjLFVBQ3JDSixLQUFLc0ssSUFBTW5LLFNBQVNDLGNBQWMsY0FDbENKLEtBQUt1SyxNQUFRcEssU0FBU0MsY0FBYyxVQUNwQ0osS0FBS3NCLElBQU1uQixTQUFTQyxjQUFjLGdCQUNsQ0osS0FBS3dLLEtBQU9ySyxTQUFTQyxjQUFjLGlCQUNuQ0osS0FBS3lLLEtBQU90SyxTQUFTQyxjQUFjLFFBQ25DSixLQUFLMEssSUFBTXZLLFNBQVNDLGNBQWMsY1IreEJwQyxNQVJBZixHQUFhd0YsSUFDWGpGLElBQUssUUFDTFIsTUFBTyxXUXJ4QlBZLEtBQUtvSyxPQUFPeEksTUFBTStJLE9BQVMsTUFDM0IzSyxLQUFLMEssSUFBSTlJLE1BQU1nSixVQUFZLG9CUjB4QnRCL0YsSUFHVHJILEdBQVFpRyxRUTN5QmFvQiIsImZpbGUiOiIuL2Fzc2V0cy9qcy9hcHAuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgTWVldGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTWVldGluZygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVldGluZyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTWVldGluZywgW3tcbiAgICBrZXk6ICdkaXNwbGF5TWVldGluZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3BsYXlNZWV0aW5nKHJlcykge1xuICAgICAgdmFyIGRheVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY20gLmRheScgKyBuZXcgRGF0ZShyZXMuc3RhcnQpLmdldERhdGUoKSk7XG4gICAgICBpZiAoZGF5VGV4dC5wYXJlbnRFbGVtZW50LmNoaWxkRWxlbWVudENvdW50IDwgMykge1xuICAgICAgICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmFyIHRpbWVPZkV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICB2YXIgdGltZVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuZXcgRGF0ZShyZXMuc3RhcnQpLmdldEhvdXJzKCkgKyBcIi1cIiArIG5ldyBEYXRlKHJlcy5lbmQpLmdldEhvdXJzKCkpO1xuICAgICAgICB0aW1lT2ZFdmVudC5hcHBlbmRDaGlsZCh0aW1lVGV4dCk7XG4gICAgICAgIHRpbWVPZkV2ZW50LmNsYXNzTmFtZSA9ICd0aW1lJztcbiAgICAgICAgZXZlbnQuY2xhc3NOYW1lID0gXCJldmVudFwiO1xuICAgICAgICB2YXIgbWVldGluZyA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJlcy5uYW1lKTtcbiAgICAgICAgZXZlbnQuYXBwZW5kQ2hpbGQodGltZU9mRXZlbnQpO1xuICAgICAgICBldmVudC5hcHBlbmRDaGlsZChtZWV0aW5nKTtcbiAgICAgICAgZGF5VGV4dC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoZGF5VGV4dC5wYXJlbnRFbGVtZW50LmNoaWxkRWxlbWVudENvdW50ID09PSAzKSB7XG4gICAgICAgIHZhciBfZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmFyIF90aW1lT2ZFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgX3RpbWVPZkV2ZW50LmNsYXNzTmFtZSA9ICd0aW1lJztcbiAgICAgICAgX2V2ZW50LmNsYXNzTmFtZSA9IFwiZXZlbnRcIjtcbiAgICAgICAgdmFyIF9tZWV0aW5nID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1NlZSBtb3JlJyk7XG4gICAgICAgIF9ldmVudC5hcHBlbmRDaGlsZChfdGltZU9mRXZlbnQpO1xuICAgICAgICBfZXZlbnQuYXBwZW5kQ2hpbGQoX21lZXRpbmcpO1xuICAgICAgICBkYXlUZXh0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoX2V2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkaXNwbGF5TWVldGluZ0hvdXJzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcGxheU1lZXRpbmdIb3VycyhyZXMpIHtcbiAgICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKHJlcy5zdGFydCkuZ2V0SG91cnMoKTtcbiAgICAgIHZhciBlbmQgPSBuZXcgRGF0ZShyZXMuZW5kKS5nZXRIb3VycygpO1xuICAgICAgdmFyIG1pbnV0ZXMgPSBuZXcgRGF0ZShyZXMuc3RhcnQpLmdldE1pbnV0ZXMoKTtcbiAgICAgIGVuZCA9IG1pbnV0ZXMgPT09IDMwID8gZW5kICsgMC41IDogZW5kO1xuICAgICAgY29uc29sZS5sb2coc3RhcnQgKyBcIiBcIiArIGVuZCk7XG4gICAgICB2YXIgZmlyc3RUaW1lID0gdHJ1ZTtcblxuICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpID0gaSArIDAuNSkge1xuICAgICAgICB2YXIgcmVwbGFjZURvdCA9IFN0cmluZyhpKS5yZXBsYWNlKC9cXC4vZywgJy0nKTtcbiAgICAgICAgaWYgKGkgJSAyID09PSAwKSB7XG4gICAgICAgICAgX3NlbGVjdFVJID0gJy5oJyArIGk7XG4gICAgICAgIH1cbiAgICAgICAgX3NlbGVjdFVJID0gJy5oJyArIHJlcGxhY2VEb3Q7XG4gICAgICAgIGNvbnNvbGUubG9nKF9zZWxlY3RVSSk7XG4gICAgICAgIHZhciBfc2VsZWN0VUkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKF9zZWxlY3RVSSk7XG4gICAgICAgIF9zZWxlY3RVSS5zdHlsZS5iYWNrZ3JvdW5kID0gXCJyZ2JhKDE4OSwxODksMTg5LCAwLjIpXCI7XG4gICAgICAgIF9zZWxlY3RVSS5zdHlsZS5ib3JkZXJMZWZ0ID0gXCIycmVtIHNvbGlkIHJnYmEoMTg5LDE4OSwxODksIDAuNilcIjtcbiAgICAgICAgaWYgKGZpcnN0VGltZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIF9zZWxlY3RVSS5pbm5lclRleHQgPSByZXMubmFtZSArICcgLSA0cGVyc29ucyc7XG4gICAgICAgICAgZmlyc3RUaW1lID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdmYWtlRGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZha2VEYXRlKCkge1xuICAgICAgdmFyIHNlbmRzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgICAgIHZhciBuYW1lID0gW1wiTWVldGluZ1wiLCBcInJldW5pb25cIiwgXCJwYXJ0eVwiLCBcImdyb3VwaW5nXCIsIFwiRW5kIG9mIHdlZWtcIl07XG4gICAgICAgIHZhciBuYW1lUmFuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpO1xuICAgICAgICBuYW1lID0gbmFtZVtuYW1lUmFuZF07XG4gICAgICAgIHZhciByYW5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogODAwMDAwMDAwMCArIDEpO1xuICAgICAgICB2YXIgcmFuZDIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzNjAwMDAwMCArIDEpO1xuICAgICAgICB2YXIgc3RhcnQgPSBuZXcgRGF0ZSgyMDE4LCA2LCAwKS5nZXRUaW1lKCkgKyByYW5kO1xuICAgICAgICB2YXIgZW5kID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyByYW5kICsgcmFuZDI7XG4gICAgICAgIHZhciBzZW5kID0geyBuYW1lOiBuYW1lLCBzdGFydDogc3RhcnQsIGVuZDogZW5kIH07XG4gICAgICAgIHNlbmRzLnB1c2goc2VuZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2VuZHM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnbW9udGgnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtb250aChzZW5kLCBzZWxlY3QpIHtcbiAgICAgIGlmIChzZWxlY3QucGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA8PSAzKSB7XG4gICAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB2YXIgdGltZU9mRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIHZhciB0aW1lVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5ldyBEYXRlKHNlbmQuc3RhcnQpLmdldEhvdXJzKCkgKyAnaCcpO1xuICAgICAgICB0aW1lT2ZFdmVudC5hcHBlbmRDaGlsZCh0aW1lVGV4dCk7XG4gICAgICAgIHRpbWVPZkV2ZW50LmNsYXNzTmFtZSA9ICd0aW1lJztcbiAgICAgICAgZXZlbnQuY2xhc3NOYW1lID0gXCJldmVudFwiO1xuICAgICAgICB2YXIgbWVldGluZyA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHNlbmQubmFtZSk7XG4gICAgICAgIGV2ZW50LmFwcGVuZENoaWxkKHRpbWVPZkV2ZW50KTtcbiAgICAgICAgZXZlbnQuYXBwZW5kQ2hpbGQobWVldGluZyk7XG4gICAgICAgIHNlbGVjdC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbmVNZWV0aW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25lTWVldGluZygpIHtcbiAgICAgIHZhciBpbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmZvXCIpO1xuICAgICAgaWYgKGluZm8uY2hpbGROb2Rlcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgaW5mby5pbm5lckhUTUwgPSAnJztcbiAgICAgIH1cbiAgICAgIHZhciB0eHQgPSBcIk1lZXRpbmcgd2l0aC4uXCI7XG4gICAgICB2YXIgY2FyZCA9IE1lZXRpbmcuY3JlYXRlRGl2KHVuZGVmaW5lZCwgXCJjYXJkXCIpO1xuICAgICAgdmFyIGNhcmRDb250ZW50ID0gTWVldGluZy5jcmVhdGVEaXYodW5kZWZpbmVkLCBcImNhcmRfX2NvbnRlbnRcIik7XG4gICAgICB2YXIgY2FyZFByaW1hcnkgPSBNZWV0aW5nLmNyZWF0ZURpdih0eHQsIFwiY2FyZF9fY29udGVudC1wcmltYXJ5XCIpO1xuICAgICAgY2FyZENvbnRlbnQuYXBwZW5kQ2hpbGQoY2FyZFByaW1hcnkpO1xuICAgICAgY2FyZC5hcHBlbmRDaGlsZChjYXJkQ29udGVudCk7XG4gICAgICBpbmZvLmFwcGVuZENoaWxkKGNhcmQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uZU1lZXRpbmdEYXknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbmVNZWV0aW5nRGF5KGhvdXIpIHtcbiAgICAgIHZhciBpbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmZvXCIpO1xuICAgICAgaWYgKGluZm8uY2hpbGROb2Rlcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgaW5mby5pbm5lckhUTUwgPSAnJztcbiAgICAgIH1cbiAgICAgIHZhciB0eHQgPSBcIkNyZWF0ZSBhIG1lZXRpbmcgYXQgXCIgKyBob3VyICsgXCJob3Vycy5cIjtcbiAgICAgIHZhciBjYXJkID0gTWVldGluZy5jcmVhdGVEaXYodW5kZWZpbmVkLCBcImNhcmRcIik7XG4gICAgICB2YXIgY2FyZENvbnRlbnQgPSBNZWV0aW5nLmNyZWF0ZURpdih1bmRlZmluZWQsIFwiY2FyZF9fY29udGVudFwiKTtcbiAgICAgIHZhciBjYXJkUHJpbWFyeSA9IE1lZXRpbmcuY3JlYXRlRGl2KHR4dCwgXCJjYXJkX19jb250ZW50LXByaW1hcnlcIik7XG4gICAgICBjYXJkQ29udGVudC5hcHBlbmRDaGlsZChjYXJkUHJpbWFyeSk7XG4gICAgICBjYXJkLmFwcGVuZENoaWxkKGNhcmRDb250ZW50KTtcbiAgICAgIGluZm8uYXBwZW5kQ2hpbGQoY2FyZCk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6ICdjcmVhdGVEaXYnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVEaXYoKSB7XG4gICAgICB2YXIgdHh0Q29udGVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogXCJcIjtcbiAgICAgIHZhciBjc3MgPSBhcmd1bWVudHNbMV07XG5cbiAgICAgIHZhciBhcHBlbmRSaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgYXBwZW5kUmlnaHQuY2xhc3NOYW1lID0gY3NzO1xuICAgICAgYXBwZW5kUmlnaHQuaW5uZXJUZXh0ID0gdHh0Q29udGVudDtcbiAgICAgIHJldHVybiBhcHBlbmRSaWdodDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTWVldGluZztcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTWVldGluZztcblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbl9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9DYWxlbmRhck1vbnRoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9DYWxlbmRhck1vbnRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NhbGVuZGFyTW9udGgpO1xuXG52YXIgX0NhbGVuZGFyRGF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxudmFyIF9DYWxlbmRhckRheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DYWxlbmRhckRheSk7XG5cbnZhciBfU3RvcmFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfU3RvcmFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdG9yYWdlKTtcblxudmFyIF9NZWV0aW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9NZWV0aW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lZXRpbmcpO1xuXG52YXIgX0FkZE1lZXRpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX0FkZE1lZXRpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQWRkTWVldGluZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBDYWxlbmRhclVJID0gbmV3IF9DYWxlbmRhck1vbnRoMi5kZWZhdWx0KCk7XG52YXIgY2FsZW5kYXJEYXkgPSBuZXcgX0NhbGVuZGFyRGF5Mi5kZWZhdWx0KCk7XG52YXIgc3RvcmFnZSA9IG5ldyBfU3RvcmFnZTIuZGVmYXVsdCgpO1xudmFyIG1lZXRpbmcgPSBuZXcgX01lZXRpbmcyLmRlZmF1bHQoKTtcbnZhciBBZGRNZWV0aW4gPSBuZXcgX0FkZE1lZXRpbmcyLmRlZmF1bHQoKTtcblxudmFyIGNhbGVuZGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGVuZGFyLWRheXMnKTtcbnZhciBjYWxlbmRhckdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FsZW5kYXItZ3JpZCcpO1xudmFyIHByZXZNb250aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmV2aW91cy0tbW9udGgnKTtcbnZhciBuZXh0TW9udGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV4dC0tbW9udGgnKTtcbnZhciBkYXlzID0gWydNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCcsICdTdW4nXTtcblxuZGF5cy5mb3JFYWNoKGZ1bmN0aW9uIChkYXkpIHtcbiAgdmFyIGNhbGVuZGFyRGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNhbGVuZGFyRGF5LmNsYXNzTmFtZSA9IFwiY2FsZW5kYXItZGF5XCI7XG4gIGNhbGVuZGFyRGF5LmlubmVyVGV4dCA9IGRheTtcbiAgY2FsZW5kYXIuYXBwZW5kQ2hpbGQoY2FsZW5kYXJEYXkpO1xufSk7XG5DYWxlbmRhclVJLmRheU9mQ2FsZW5kYXIoKTtcbnZhciBmaXJzdERheSA9IG5ldyBEYXRlKENhbGVuZGFyVUkueWVhciwgQ2FsZW5kYXJVSS5tb250aCwgMCkuZ2V0VGltZSgpO1xudmFyIGxhc3REYXkgPSBuZXcgRGF0ZShDYWxlbmRhclVJLnllYXIsIENhbGVuZGFyVUkubW9udGggKyAxLCAwKS5nZXRUaW1lKCk7XG5zdG9yYWdlLmdldE1lZXRpbmcoZmlyc3REYXksIGxhc3REYXkpO1xuXG5wcmV2TW9udGguYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXG4gIGlmIChjYWxlbmRhckRheS5pc3NldCA9PT0gdHJ1ZSkge1xuICAgIGNhbGVuZGFyRGF5LnByZXZEYXkoKTtcbiAgfSBlbHNlIHtcbiAgICBDYWxlbmRhclVJLnByZXZNb250aCgpO1xuICAgIHZhciBfZmlyc3REYXkgPSBuZXcgRGF0ZShDYWxlbmRhclVJLnllYXIsIENhbGVuZGFyVUkubW9udGgsIDApLmdldFRpbWUoKTtcbiAgICB2YXIgX2xhc3REYXkgPSBuZXcgRGF0ZShDYWxlbmRhclVJLnllYXIsIENhbGVuZGFyVUkubW9udGggKyAxLCAwKS5nZXRUaW1lKCk7XG4gICAgc3RvcmFnZS5nZXRNZWV0aW5nKF9maXJzdERheSwgX2xhc3REYXkpO1xuICB9XG4gIGUucHJldmVudERlZmF1bHQoKTtcbn0pO1xuXG5uZXh0TW9udGguYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXG4gIGlmIChjYWxlbmRhckRheS5pc3NldCA9PT0gdHJ1ZSkge1xuICAgIGNhbGVuZGFyRGF5Lm5leHREYXkoKTtcbiAgfSBlbHNlIHtcbiAgICBDYWxlbmRhclVJLm5leHRNb250aCgpO1xuICAgIHZhciBfZmlyc3REYXkyID0gbmV3IERhdGUoQ2FsZW5kYXJVSS55ZWFyLCBDYWxlbmRhclVJLm1vbnRoLCAwKS5nZXRUaW1lKCk7XG4gICAgdmFyIF9sYXN0RGF5MiA9IG5ldyBEYXRlKENhbGVuZGFyVUkueWVhciwgQ2FsZW5kYXJVSS5tb250aCArIDEsIDApLmdldFRpbWUoKTtcbiAgICBzdG9yYWdlLmdldE1lZXRpbmcoX2ZpcnN0RGF5MiwgX2xhc3REYXkyKTtcbiAgfVxuICBlLnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxuY2FsZW5kYXJHcmlkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPT09IFwiY2FsZW5kYXItZ3JpZC1kYXkgY21cIikge1xuICAgIHZhciBzYXZlRGF5ID0gZXZlbnQudGFyZ2V0LmNoaWxkTm9kZXNbMF0uaW5uZXJUZXh0O1xuICAgIGNhbGVuZGFyRGF5LnllYXIgPSBDYWxlbmRhclVJLnllYXI7XG4gICAgY2FsZW5kYXJEYXkuZGlzcGxheUNhbGVuZGFyKHNhdmVEYXksIENhbGVuZGFyVUkubW9udGgpO1xuICAgIHZhciBfZmlyc3REYXkzID0gbmV3IERhdGUoQ2FsZW5kYXJVSS55ZWFyLCBDYWxlbmRhclVJLm1vbnRoLCBzYXZlRGF5LCA4KS5nZXRUaW1lKCk7XG4gICAgdmFyIF9sYXN0RGF5MyA9IG5ldyBEYXRlKENhbGVuZGFyVUkueWVhciwgQ2FsZW5kYXJVSS5tb250aCwgTnVtYmVyKHNhdmVEYXkpICsgMSwgMjIpLmdldFRpbWUoKTtcbiAgICBzdG9yYWdlLmdldE1lZXRpbmcoX2ZpcnN0RGF5MywgX2xhc3REYXkzKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICAvLyBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJldmVudFwiICkge1xuICAvLyAgIG1lZXRpbmcub25lTWVldGluZygpO1xuICAvLyB9XG59KTtcblxuY2FsZW5kYXJEYXkuQ2FsZW5kYXJHcmlkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpWzBdID09PSBcImhvdXItZXZlbnRcIiAmJiBldmVudC50YXJnZXQuaW5uZXJUZXh0ID09PSBcIlwiKSB7XG4gICAgdmFyIGhvdXIgPSBwYXJzZUZsb2F0KGV2ZW50LnRhcmdldC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpWzFdLnNwbGl0KFwiaFwiKVsxXSk7XG4gICAgbWVldGluZy5vbmVNZWV0aW5nRGF5KGhvdXIpO1xuICB9XG4gIGUucHJldmVudERlZmF1bHQoKTtcbn0pO1xuXG4vLyBBYmlsaXR5IHRvIHNlYXJjaCBmb3IgYSBkYXRlLlxuLy8gXG5cbnZhciBhZGRNZWV0aW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1ldmVudCcpO1xuYWRkTWVldGluZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gIEFkZE1lZXRpbi5pc3NldCgpO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBDYWxlbmRhciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ2FsZW5kYXIobW9udGgsIHllYXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FsZW5kYXIpO1xuXG4gICAgdGhpcy5tb250aCA9IG1vbnRoID09PSB1bmRlZmluZWQgPyBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgOiBtb250aDtcbiAgICB0aGlzLnllYXIgPSB5ZWFyID09PSB1bmRlZmluZWQgPyBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgOiB5ZWFyO1xuICAgIHRoaXMuY2FsZW5kYXJHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGVuZGFyLWdyaWQnKTtcbiAgICB0aGlzLmNhbGVuZGFyVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoMScpO1xuICAgIHRoaXMubW9udGhzID0gWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ107XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ2FsZW5kYXIsIFt7XG4gICAga2V5OiAnZGF5T2ZDYWxlbmRhcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRheU9mQ2FsZW5kYXIoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgbW9udGggPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMubW9udGg7XG4gICAgICB2YXIgeWVhciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdGhpcy55ZWFyO1xuXG4gICAgICB0aGlzLnRpdGxlTW9udGgoKTtcbiAgICAgIHZhciBmaXJzdERhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMCksXG4gICAgICAgICAgbGFzdERhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIDApLFxuICAgICAgICAgIGZpcnN0TW9uZGF5ID0gQ2FsZW5kYXIuZ2V0TW9uZGF5KGZpcnN0RGF0ZSkuZ2V0RGF0ZSgpO1xuXG4gICAgICB2YXIgZmlyc3REYXRlT2ZNb250aCA9IGZpcnN0RGF0ZS5nZXREYXRlKCk7XG4gICAgICB2YXIgZW5kT2ZQcmV2TW9udGggPSBsYXN0RGF0ZS5nZXREYXRlKCk7XG4gICAgICB2YXIgZW5kT2ZDdXJyZW50TW9udGggPSA3IC0gbGFzdERhdGUuZ2V0RGF5KCk7XG5cbiAgICAgIHZhciBhbGxEYXRlID0gW2ZpcnN0RGF0ZU9mTW9udGgsIGVuZE9mUHJldk1vbnRoLCBlbmRPZkN1cnJlbnRNb250aF07XG4gICAgICB2YXIgY2hlY2tGaXJzdE1vbnRoID0gZmFsc2U7XG4gICAgICBhbGxEYXRlLmZvckVhY2goZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IGNoZWNrRmlyc3RNb250aCA9PT0gZmFsc2UgPyBmaXJzdE1vbmRheSA6IDE7IGkgPD0gZGF0ZTsgaSsrKSB7XG4gICAgICAgICAgX3RoaXMuZGlzcGxheUNhbGVuZGFyKGksIGRhdGUgIT09IGFsbERhdGVbMV0gfHwgY2hlY2tGaXJzdE1vbnRoID09PSBmYWxzZSA/ICdmYWRlTW9udGgnIDogJ2NtJyk7XG4gICAgICAgICAgaWYgKGNoZWNrRmlyc3RNb250aCA9PT0gdHJ1ZSAmJiBpID09PSBuZXcgRGF0ZSgpLmdldERhdGUoKSAmJiBtb250aCA9PT0gbmV3IERhdGUoKS5nZXRNb250aCgpKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY20gLmRheScgKyBpKS5zdHlsZS5iYWNrZ3JvdW5kID0gXCIjMDBFNjc2XCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoZWNrRmlyc3RNb250aCA9IHRydWU7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkaXNwbGF5Q2FsZW5kYXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwbGF5Q2FsZW5kYXIoZGF5LCBibSkge1xuXG4gICAgICB2YXIgY3JlYXRlRGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjcmVhdGVEYXkuY2xhc3NOYW1lID0gJ2NhbGVuZGFyLWdyaWQtZGF5ICcgKyBibTtcbiAgICAgIHZhciBkYXlUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBkYXlUZXh0LmNsYXNzTmFtZSA9ICdkYXl0ZXh0IGRheScgKyBkYXk7XG4gICAgICBkYXlUZXh0LmlubmVyVGV4dCA9IGRheTtcbiAgICAgIGNyZWF0ZURheS5hcHBlbmRDaGlsZChkYXlUZXh0KTtcbiAgICAgIHRoaXMuY2FsZW5kYXJHcmlkLmFwcGVuZENoaWxkKGNyZWF0ZURheSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVtb3ZlQ2FsZW5kYXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVDYWxlbmRhcigpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhci1ncmlkJykuaW5uZXJIVE1MID0gXCJcIjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICduZXh0TW9udGgnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0TW9udGgoKSB7XG5cbiAgICAgIGlmICh0aGlzLm1vbnRoIDwgMTEpIHtcbiAgICAgICAgdGhpcy5tb250aCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy55ZWFyKys7XG4gICAgICAgIHRoaXMubW9udGggPSAwO1xuICAgICAgfVxuICAgICAgdGhpcy5yZW1vdmVDYWxlbmRhcigpO1xuICAgICAgdGhpcy5kYXlPZkNhbGVuZGFyKHRoaXMubW9udGgsIHRoaXMueWVhcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncHJldk1vbnRoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJldk1vbnRoKCkge1xuXG4gICAgICBpZiAodGhpcy5tb250aCA+IDApIHtcbiAgICAgICAgdGhpcy5tb250aC0tO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy55ZWFyLS07XG4gICAgICAgIHRoaXMubW9udGggPSAxMTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVtb3ZlQ2FsZW5kYXIoKTtcbiAgICAgIHRoaXMuZGF5T2ZDYWxlbmRhcih0aGlzLm1vbnRoLCB0aGlzLnllYXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3RpdGxlTW9udGgnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0aXRsZU1vbnRoKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBoMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gxJyk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaDEuaW5uZXJUZXh0ID0gXCJcIjtcbiAgICAgICAgaDEuaW5uZXJUZXh0ID0gX3RoaXMyLm1vbnRoc1tfdGhpczIubW9udGhdICsgJyAnICsgX3RoaXMyLnllYXI7XG4gICAgICB9LCA1MCk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6ICdnZXRNb25kYXknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNb25kYXkoZCkge1xuXG4gICAgICBkID0gbmV3IERhdGUoZCk7XG4gICAgICB2YXIgZGF5ID0gZC5nZXREYXkoKSxcbiAgICAgICAgICBkaWZmID0gZC5nZXREYXRlKCkgLSBkYXkgKyAoZGF5ID09IDAgPyAtNiA6IDEpOyAvLyBhZGp1c3Qgd2hlbiBkYXkgaXMgc3VuZGF5XG4gICAgICByZXR1cm4gbmV3IERhdGUoZC5zZXREYXRlKGRpZmYpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQ2FsZW5kYXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IENhbGVuZGFyO1xuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIENhbGVuZGFyRGF5ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBDYWxlbmRhckRheSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FsZW5kYXJEYXkpO1xuXG4gICAgdGhpcy5tYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xuICAgIHRoaXMuaDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoMScpO1xuICAgIHRoaXMubW9udGhzID0gWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ107XG4gICAgdGhpcy5DYWxlbmRhckdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLkNhbGVuZGFyR3JpZC5jbGFzc05hbWUgPSAnY2FsZW5kYXItZ3JpZC1ob3Vycyc7XG4gICAgLy8gdGhpcy5DYWxlbmRhckdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FsZW5kYXItZ3JpZC1ob3VycycpO1xuICAgIHRoaXMuaXNzZXQgPSBmYWxzZTtcbiAgICB0aGlzLnllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ2FsZW5kYXJEYXksIFt7XG4gICAga2V5OiAnZGlzcGxheUNhbGVuZGFyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcGxheUNhbGVuZGFyKGRheSwgbW9udGgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuZGF5ID0gTnVtYmVyKGRheSk7XG4gICAgICB0aGlzLm1vbnRoID0gbW9udGg7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMubWFpbi5pbm5lckhUTUwgPSAnJztcbiAgICAgIH0sIDUwKTtcbiAgICAgIHRoaXMuaDEuc3R5bGUuYW5pbWF0aW9uID0gXCIxMDBtcyBncmlkIGN1YmljLWJlemllciguMjUsIC44LCAuMjUsIDEpXCI7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuaDEuaW5uZXJUZXh0ID0gQ2FsZW5kYXJEYXkub3JkaW5hbF9zdWZmaXhfb2YoTnVtYmVyKGRheSkpICsgJyAnICsgX3RoaXMubW9udGhzW21vbnRoXSArICcgJyArIF90aGlzLnllYXI7XG4gICAgICB9LCAxMDApO1xuXG4gICAgICBmb3IgKHZhciBpID0gODsgaSA8PSAyMjsgaSA9IGkgKyAwLjUpIHtcbiAgICAgICAgdmFyIHJlcGxhY2VEb3QgPSBTdHJpbmcoaSkucmVwbGFjZSgvXFwuL2csICctJyk7XG4gICAgICAgIHZhciBob3VycyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBob3Vycy5jbGFzc05hbWUgPSBcImhvdXJzXCI7XG4gICAgICAgIHZhciBob3VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhvdXIuY2xhc3NOYW1lID0gXCJob3VyXCI7XG4gICAgICAgIHZhciBob3VyRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaG91ckV2ZW50LmNsYXNzTmFtZSA9ICdob3VyLWV2ZW50IGgnICsgcmVwbGFjZURvdDtcbiAgICAgICAgaWYgKGkgJSAxID09PSAwKSB7XG4gICAgICAgICAgaWYgKGkgPCAxMikge1xuICAgICAgICAgICAgaG91ci5pbm5lclRleHQgPSBpICsgJ2FtJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaG91ci5pbm5lclRleHQgPSBpICsgJ3BtJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaG91ckV2ZW50LnN0eWxlLmJvcmRlclRvcCA9IFwiMXB4IHNvbGlkIHJnYmEoMTg5LDE4OSwxODksIDAuNClcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGhvdXJzLmFwcGVuZENoaWxkKGhvdXIpO1xuICAgICAgICBob3Vycy5hcHBlbmRDaGlsZChob3VyRXZlbnQpO1xuICAgICAgICB0aGlzLkNhbGVuZGFyR3JpZC5hcHBlbmRDaGlsZChob3Vycyk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5hcHBlbmRDaGlsZCh0aGlzLkNhbGVuZGFyR3JpZCk7XG4gICAgICAgIHRoaXMuaXNzZXQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ25leHREYXknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0RGF5KCkge1xuXG4gICAgICB2YXIgc2F2ZSA9IG5ldyBEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCArIDEsIDApO1xuICAgICAgc2F2ZSA9IHNhdmUuZ2V0RGF0ZSgpO1xuICAgICAgaWYgKHRoaXMuZGF5ID09PSBzYXZlKSB7XG4gICAgICAgIHRoaXMuZGF5ID0gMTtcblxuICAgICAgICBpZiAodGhpcy5tb250aCA8IDExKSB7XG4gICAgICAgICAgdGhpcy5tb250aCsrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMueWVhcisrO1xuICAgICAgICAgIHRoaXMubW9udGggPSAwO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRheSsrO1xuICAgICAgfVxuICAgICAgdGhpcy5DYWxlbmRhckdyaWQuaW5uZXJIVE1MID0gJyc7XG4gICAgICB0aGlzLmRpc3BsYXlDYWxlbmRhcih0aGlzLmRheSwgdGhpcy5tb250aCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncHJldkRheScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByZXZEYXkoKSB7XG4gICAgICBpZiAodGhpcy5kYXkgPT09IDEpIHtcblxuICAgICAgICBpZiAodGhpcy5tb250aCA+IDApIHtcbiAgICAgICAgICB0aGlzLm1vbnRoLS07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy55ZWFyLS07XG4gICAgICAgICAgdGhpcy5tb250aCA9IDExO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzYXZlID0gbmV3IERhdGUodGhpcy55ZWFyLCB0aGlzLm1vbnRoICsgMSwgMCk7XG4gICAgICAgIHRoaXMuZGF5ID0gc2F2ZS5nZXREYXRlKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGF5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF5LS07XG4gICAgICB9XG4gICAgICB0aGlzLkNhbGVuZGFyR3JpZC5pbm5lckhUTUwgPSAnJztcbiAgICAgIHRoaXMuZGlzcGxheUNhbGVuZGFyKHRoaXMuZGF5LCB0aGlzLm1vbnRoKTtcbiAgICB9XG5cbiAgICAvLyBldmVudFVJKHN0YXJ0LCBlbmQpIHtcbiAgICAvLyAgIGxldCBzdGFydEhvdXIgPSBuZXcgRGF0ZShzdGFydCkuZ2V0SG91cnMoKTtcbiAgICAvLyAgIGxldCBlbmRIb3VyID0gbmV3IERhdGUoZW5kKS5nZXRIb3VycygpO1xuXG4gICAgLy8gfVxuXG4gIH1dLCBbe1xuICAgIGtleTogJ29yZGluYWxfc3VmZml4X29mJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb3JkaW5hbF9zdWZmaXhfb2YoaSkge1xuICAgICAgdmFyIGogPSBpICUgMTAsXG4gICAgICAgICAgayA9IGkgJSAxMDA7XG4gICAgICBpZiAoaiA9PSAxICYmIGsgIT0gMTEpIHtcbiAgICAgICAgcmV0dXJuIGkgKyBcInN0XCI7XG4gICAgICB9XG4gICAgICBpZiAoaiA9PSAyICYmIGsgIT0gMTIpIHtcbiAgICAgICAgcmV0dXJuIGkgKyBcIm5kXCI7XG4gICAgICB9XG4gICAgICBpZiAoaiA9PSAzICYmIGsgIT0gMTMpIHtcbiAgICAgICAgcmV0dXJuIGkgKyBcInJkXCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gaSArIFwidGhcIjtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQ2FsZW5kYXJEYXk7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IENhbGVuZGFyRGF5O1xuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9NZWV0aW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9NZWV0aW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lZXRpbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgbSA9IG5ldyBfTWVldGluZzIuZGVmYXVsdCgpO1xuXG52YXIgU3RvcmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3RvcmFnZSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RvcmFnZSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU3RvcmFnZSwgW3tcbiAgICBrZXk6ICdnZXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQodXJsKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoZGF0YSk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncG9zdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBvc3QodXJsLCBkYXRhKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmZXRjaCh1cmwsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEpO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3B1dCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHB1dCh1cmwsIGRhdGEpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZldGNoKHVybCwge1xuICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBEZWxldGVcblxuICB9LCB7XG4gICAga2V5OiAnZGVsZXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGV0ZSh1cmwsIGRhdGEpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZldGNoKHVybCwge1xuICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgnRGVsZXRlZCcpO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7aW50fSBmcm9tIFxuICAgICAqIEBwYXJhbSB7aW50fSB0byBcbiAgICAgKiBAcmV0dXJuIHtBcnJheS5vYmplY3R9IFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdnZXRNZWV0aW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWVldGluZyhmcm9tLCB0bykge1xuICAgICAgdGhpcy5nZXQoJ2h0dHBzOi8vY3J1ZC1tZWV0aW5ncy5henVyZXdlYnNpdGVzLm5ldC9hcGkvZ2V0QWxsP3N0YXJ0PScgKyBmcm9tICsgJyZlbmQ9JyArIHRvKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAodG8gLSBmcm9tID09PSAxMzY4MDAwMDApIHtcbiAgICAgICAgICByZXNwb25zZS5yZXMuZm9yRWFjaChmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBtLmRpc3BsYXlNZWV0aW5nSG91cnMocmVzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNwb25zZS5yZXMuZm9yRWFjaChmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBtLmRpc3BsYXlNZWV0aW5nKHJlcyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2FkZE1lZXRpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRNZWV0aW5nKGRhdGEpIHtcblxuICAgICAgdGhpcy5odHRwLnBvc3QoJ2h0dHBzOi8vY3J1ZC1tZWV0aW5ncy5henVyZXdlYnNpdGVzLm5ldC9hcGkvYWRkP2NvZGU9Sk5JMGxMczFINTNVZzFQZUVJMzNWNTBQOEFWRVI1Y1R6YXVycW0wcUk5OGQwSXVsbTBzU2p3PT0nLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3VwZGF0ZU1lZXRpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVNZWV0aW5nKHRpbWUsIGRhdGEpIHtcblxuICAgICAgdGhpcy5odHRwLnB1dCgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzLzEnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkZWxldGVNZWV0aW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlTWVldGluZyhpZCkge1xuICAgICAgdGhpcy5odHRwLmRlbGV0ZSgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzLzEnKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU3RvcmFnZTtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU3RvcmFnZTtcblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBBZGRNZWV0aW5nID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBBZGRNZWV0aW5nKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBZGRNZWV0aW5nKTtcblxuICAgIHRoaXMubmF2YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpO1xuICAgIHRoaXMuaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vbnRoJyk7XG4gICAgdGhpcy5idG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWV2ZW50Jyk7XG4gICAgdGhpcy5sb2dpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbicpO1xuICAgIHRoaXMubG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luLWxvZ2luJyk7XG4gICAgdGhpcy5zaWduID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luLXNpZ251cCcpO1xuICAgIHRoaXMuZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICB0aGlzLmFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZXZlbnQnKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhBZGRNZWV0aW5nLCBbe1xuICAgIGtleTogJ2lzc2V0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNzZXQoKSB7XG4gICAgICB0aGlzLm5hdmJhci5zdHlsZS5oZWlnaHQgPSBcIjMwJVwiO1xuICAgICAgdGhpcy5hZGQuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGUoNDVkZWcpXCI7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEFkZE1lZXRpbmc7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEFkZE1lZXRpbmc7XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXNzZXRzL2pzL2FwcC5idW5kbGUuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBkMjg0MTAzMzZmYjhmZWVkZDM3NiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lZXRpbmcge1xuXG4gIGRpc3BsYXlNZWV0aW5nKHJlcykge1xuICAgIGNvbnN0IGRheVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuY20gLmRheSR7bmV3IERhdGUocmVzLnN0YXJ0KS5nZXREYXRlKCl9YCk7XG4gICAgaWYgKGRheVRleHQucGFyZW50RWxlbWVudC5jaGlsZEVsZW1lbnRDb3VudCA8IDMpIHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb25zdCB0aW1lT2ZFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGNvbnN0IHRpbWVUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobmV3IERhdGUocmVzLnN0YXJ0KS5nZXRIb3VycygpKyBcIi1cIiArIG5ldyBEYXRlKHJlcy5lbmQpLmdldEhvdXJzKCkpO1xuICAgICAgdGltZU9mRXZlbnQuYXBwZW5kQ2hpbGQodGltZVRleHQpO1xuICAgICAgdGltZU9mRXZlbnQuY2xhc3NOYW1lID0gJ3RpbWUnO1xuICAgICAgZXZlbnQuY2xhc3NOYW1lID0gXCJldmVudFwiO1xuICAgICAgbGV0IG1lZXRpbmcgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShyZXMubmFtZSk7XG4gICAgICBldmVudC5hcHBlbmRDaGlsZCh0aW1lT2ZFdmVudCk7XG4gICAgICBldmVudC5hcHBlbmRDaGlsZChtZWV0aW5nKTtcbiAgICAgIGRheVRleHQucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChldmVudCk7XG4gICAgfSBlbHNlIGlmIChkYXlUZXh0LnBhcmVudEVsZW1lbnQuY2hpbGRFbGVtZW50Q291bnQgPT09IDMpIHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb25zdCB0aW1lT2ZFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIHRpbWVPZkV2ZW50LmNsYXNzTmFtZSA9ICd0aW1lJztcbiAgICAgIGV2ZW50LmNsYXNzTmFtZSA9IFwiZXZlbnRcIjtcbiAgICAgIGxldCBtZWV0aW5nID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1NlZSBtb3JlJyk7XG4gICAgICBldmVudC5hcHBlbmRDaGlsZCh0aW1lT2ZFdmVudCk7XG4gICAgICBldmVudC5hcHBlbmRDaGlsZChtZWV0aW5nKTtcbiAgICAgIGRheVRleHQucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChldmVudCk7XG4gICAgfVxuICB9XG5cbiAgZGlzcGxheU1lZXRpbmdIb3VycyhyZXMpIHtcbiAgICBsZXQgc3RhcnQgPSBuZXcgRGF0ZShyZXMuc3RhcnQpLmdldEhvdXJzKCk7XG4gICAgbGV0IGVuZCA9IG5ldyBEYXRlKHJlcy5lbmQpLmdldEhvdXJzKCk7XG4gICAgbGV0IG1pbnV0ZXMgPSBuZXcgRGF0ZShyZXMuc3RhcnQpLmdldE1pbnV0ZXMoKTtcbiAgICBlbmQgPSBtaW51dGVzID09PSAzMCA/IGVuZCArIDAuNSA6IGVuZDtcbiAgICBjb25zb2xlLmxvZyhzdGFydCArIFwiIFwiICsgZW5kKTtcbiAgICBsZXQgZmlyc3RUaW1lID0gdHJ1ZVxuICAgIFxuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgaSA9IGkgKyAwLjUpIHtcbiAgICAgIGxldCByZXBsYWNlRG90ID0gU3RyaW5nKGkpLnJlcGxhY2UoL1xcLi9nLCctJyk7XG4gICAgICBpZiAoaSAlIDIgPT09IDApIHtcbiAgICAgICAgc2VsZWN0VUkgPSBgLmgke2l9YDtcbiAgICAgIH1cbiAgICAgIHNlbGVjdFVJID0gYC5oJHtyZXBsYWNlRG90fWA7XG4gICAgICBjb25zb2xlLmxvZyhzZWxlY3RVSSk7XG4gICAgICBsZXQgc2VsZWN0VUkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdFVJKTtcbiAgICAgIHNlbGVjdFVJLnN0eWxlLmJhY2tncm91bmQgPSBcInJnYmEoMTg5LDE4OSwxODksIDAuMilcIjtcbiAgICAgIHNlbGVjdFVJLnN0eWxlLmJvcmRlckxlZnQgPSBcIjJyZW0gc29saWQgcmdiYSgxODksMTg5LDE4OSwgMC42KVwiO1xuICAgICAgaWYgKGZpcnN0VGltZSA9PT0gdHJ1ZSkge1xuICAgICAgICBzZWxlY3RVSS5pbm5lclRleHQgPSBgJHtyZXMubmFtZX0gLSA0cGVyc29uc2A7XG4gICAgICAgIGZpcnN0VGltZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZha2VEYXRlKCkge1xuICAgIGxldCBzZW5kcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcbiAgICAgIGxldCBuYW1lID0gW1wiTWVldGluZ1wiLCBcInJldW5pb25cIiwgXCJwYXJ0eVwiLCBcImdyb3VwaW5nXCIsIFwiRW5kIG9mIHdlZWtcIl07XG4gICAgICBsZXQgbmFtZVJhbmQgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogNCkpO1xuICAgICAgIG5hbWUgPSBuYW1lW25hbWVSYW5kXTtcbiAgICAgIGxldCByYW5kID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDgwMDAwMDAwMDApICsgMSk7XG4gICAgICBsZXQgcmFuZDIgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMzYwMDAwMDApICsgMSk7XG4gICAgICBsZXQgc3RhcnQgPSBuZXcgRGF0ZSgyMDE4LDYsMCkuZ2V0VGltZSgpICsgcmFuZDtcbiAgICAgIGxldCBlbmQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHJhbmQgKyByYW5kMjtcbiAgICAgIGxldCBzZW5kID0ge25hbWUsIHN0YXJ0LCBlbmR9XG4gICAgICBzZW5kcy5wdXNoKHNlbmQpO1xuICAgIH1cbiAgICByZXR1cm4gc2VuZHM7XG4gIH1cblxuICBtb250aChzZW5kLCBzZWxlY3QpIHtcbiAgICAgIGlmIChzZWxlY3QucGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA8PSAzKSB7XG4gICAgICBjb25zdCBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29uc3QgdGltZU9mRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBjb25zdCB0aW1lVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5ldyBEYXRlKHNlbmQuc3RhcnQpLmdldEhvdXJzKCkgKyAnaCcpO1xuICAgICAgdGltZU9mRXZlbnQuYXBwZW5kQ2hpbGQodGltZVRleHQpO1xuICAgICAgdGltZU9mRXZlbnQuY2xhc3NOYW1lID0gJ3RpbWUnO1xuICAgICAgZXZlbnQuY2xhc3NOYW1lID0gXCJldmVudFwiO1xuICAgICAgbGV0IG1lZXRpbmcgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzZW5kLm5hbWUpO1xuICAgICAgZXZlbnQuYXBwZW5kQ2hpbGQodGltZU9mRXZlbnQpO1xuICAgICAgZXZlbnQuYXBwZW5kQ2hpbGQobWVldGluZyk7XG4gICAgICBzZWxlY3QucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChldmVudCk7XG4gICAgICB9XG4gIH1cblxuICBvbmVNZWV0aW5nKCkge1xuICAgIGNvbnN0IGluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmluZm9cIik7XG4gICAgaWYgKCBpbmZvLmNoaWxkTm9kZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICBpbmZvLmlubmVySFRNTCA9ICcnO1xuICAgIH1cbiAgICBsZXQgdHh0ID0gXCJNZWV0aW5nIHdpdGguLlwiO1xuICAgIGxldCBjYXJkID0gTWVldGluZy5jcmVhdGVEaXYodW5kZWZpbmVkLCBcImNhcmRcIik7XG4gICAgbGV0IGNhcmRDb250ZW50ID0gTWVldGluZy5jcmVhdGVEaXYodW5kZWZpbmVkLCBcImNhcmRfX2NvbnRlbnRcIik7XG4gICAgbGV0IGNhcmRQcmltYXJ5ID0gTWVldGluZy5jcmVhdGVEaXYodHh0LCBcImNhcmRfX2NvbnRlbnQtcHJpbWFyeVwiKTtcbiAgICBjYXJkQ29udGVudC5hcHBlbmRDaGlsZChjYXJkUHJpbWFyeSk7XG4gICAgY2FyZC5hcHBlbmRDaGlsZChjYXJkQ29udGVudCk7XG4gICAgaW5mby5hcHBlbmRDaGlsZChjYXJkKTtcbiAgfVxuXG4gIG9uZU1lZXRpbmdEYXkoaG91cikge1xuICAgIGNvbnN0IGluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmluZm9cIik7XG4gICAgaWYgKCBpbmZvLmNoaWxkTm9kZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICBpbmZvLmlubmVySFRNTCA9ICcnO1xuICAgIH1cbiAgICBsZXQgdHh0ID0gXCJDcmVhdGUgYSBtZWV0aW5nIGF0IFwiICsgaG91ciArIFwiaG91cnMuXCI7XG4gICAgbGV0IGNhcmQgPSBNZWV0aW5nLmNyZWF0ZURpdih1bmRlZmluZWQsIFwiY2FyZFwiKTtcbiAgICBsZXQgY2FyZENvbnRlbnQgPSBNZWV0aW5nLmNyZWF0ZURpdih1bmRlZmluZWQsIFwiY2FyZF9fY29udGVudFwiKTtcbiAgICBsZXQgY2FyZFByaW1hcnkgPSBNZWV0aW5nLmNyZWF0ZURpdih0eHQsIFwiY2FyZF9fY29udGVudC1wcmltYXJ5XCIpO1xuICAgIGNhcmRDb250ZW50LmFwcGVuZENoaWxkKGNhcmRQcmltYXJ5KTtcbiAgICBjYXJkLmFwcGVuZENoaWxkKGNhcmRDb250ZW50KTtcbiAgICBpbmZvLmFwcGVuZENoaWxkKGNhcmQpO1xuXG4gIH1cblxuXG4gIHN0YXRpYyBjcmVhdGVEaXYodHh0Q29udGVudCA9IFwiXCIsIGNzcykge1xuICAgIGxldCBhcHBlbmRSaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFwcGVuZFJpZ2h0LmNsYXNzTmFtZSA9IGNzcztcbiAgICBhcHBlbmRSaWdodC5pbm5lclRleHQgPSB0eHRDb250ZW50O1xuICAgIHJldHVybiBhcHBlbmRSaWdodDtcbiAgfVxuICBcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hc3NldHMvanMvdnVlL01lZXRpbmcuanMiLCJpbXBvcnQgJy4vYXNzZXRzL3Nhc3MvYXBwLnNhc3MnO1xuaW1wb3J0ICcuL2Fzc2V0cy9qcy9hcHAuanMnO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC5qcyIsImltcG9ydCBDYWxlbmRhciBmcm9tICcuL3Z1ZS9DYWxlbmRhck1vbnRoJztcbmltcG9ydCBDYWxlbmRhckRheSBmcm9tICcuL3Z1ZS9DYWxlbmRhckRheSc7XG5pbXBvcnQgU3RvcmFnZSBmcm9tICcuL21vZGVsL1N0b3JhZ2UnO1xuaW1wb3J0IE1lZXRpbmcgZnJvbSAnLi92dWUvTWVldGluZyc7XG5pbXBvcnQgQWRkTWVldGluZyBmcm9tICcuL3Z1ZS9BZGRNZWV0aW5nJztcblxuY29uc3QgQ2FsZW5kYXJVSSA9IG5ldyBDYWxlbmRhcjtcbmxldCBjYWxlbmRhckRheSA9IG5ldyBDYWxlbmRhckRheTtcbmxldCBzdG9yYWdlID0gbmV3IFN0b3JhZ2U7XG5sZXQgbWVldGluZyA9IG5ldyBNZWV0aW5nO1xubGV0IEFkZE1lZXRpbiA9IG5ldyBBZGRNZWV0aW5nO1xuXG5cbmNvbnN0IGNhbGVuZGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGVuZGFyLWRheXMnKTtcbmNvbnN0IGNhbGVuZGFyR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhci1ncmlkJyk7XG5jb25zdCBwcmV2TW9udGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJldmlvdXMtLW1vbnRoJyk7XG5jb25zdCBuZXh0TW9udGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV4dC0tbW9udGgnKTtcbmNvbnN0IGRheXMgPSBbJ01vbicsJ1R1ZScsJ1dlZCcsJ1RodScsJ0ZyaScsJ1NhdCcsJ1N1biddO1xuXG5kYXlzLmZvckVhY2goIChkYXkpID0+IHtcbiAgbGV0IGNhbGVuZGFyRGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNhbGVuZGFyRGF5LmNsYXNzTmFtZSA9IFwiY2FsZW5kYXItZGF5XCI7XG4gIGNhbGVuZGFyRGF5LmlubmVyVGV4dCA9IGRheTtcbiAgY2FsZW5kYXIuYXBwZW5kQ2hpbGQoY2FsZW5kYXJEYXkpO1xufSk7XG5DYWxlbmRhclVJLmRheU9mQ2FsZW5kYXIoKTtcbmxldCBmaXJzdERheSA9IG5ldyBEYXRlKENhbGVuZGFyVUkueWVhciwgQ2FsZW5kYXJVSS5tb250aCwgMCkuZ2V0VGltZSgpO1xubGV0IGxhc3REYXkgPSBuZXcgRGF0ZShDYWxlbmRhclVJLnllYXIsIENhbGVuZGFyVUkubW9udGgrMSwgMCkuZ2V0VGltZSgpO1xuc3RvcmFnZS5nZXRNZWV0aW5nKGZpcnN0RGF5LCBsYXN0RGF5KTtcblxuXG5wcmV2TW9udGguYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXG4gIGlmKCBjYWxlbmRhckRheS5pc3NldCA9PT0gdHJ1ZSApIHtcbiAgICBjYWxlbmRhckRheS5wcmV2RGF5KCk7XG4gIH0gZWxzZSB7XG4gICAgQ2FsZW5kYXJVSS5wcmV2TW9udGgoKTtcbiAgICBsZXQgZmlyc3REYXkgPSBuZXcgRGF0ZShDYWxlbmRhclVJLnllYXIsIENhbGVuZGFyVUkubW9udGgsIDApLmdldFRpbWUoKTtcbiAgICBsZXQgbGFzdERheSA9IG5ldyBEYXRlKENhbGVuZGFyVUkueWVhciwgQ2FsZW5kYXJVSS5tb250aCsxLCAwKS5nZXRUaW1lKCk7XG4gICAgc3RvcmFnZS5nZXRNZWV0aW5nKGZpcnN0RGF5LCBsYXN0RGF5KTtcbiAgfVxuICBlLnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxubmV4dE1vbnRoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblxuICBpZiggY2FsZW5kYXJEYXkuaXNzZXQgPT09IHRydWUgKSB7XG4gICAgY2FsZW5kYXJEYXkubmV4dERheSgpO1xuICB9IGVsc2Uge1xuICAgIENhbGVuZGFyVUkubmV4dE1vbnRoKCk7XG4gICAgbGV0IGZpcnN0RGF5ID0gbmV3IERhdGUoQ2FsZW5kYXJVSS55ZWFyLCBDYWxlbmRhclVJLm1vbnRoLCAwKS5nZXRUaW1lKCk7XG4gICAgbGV0IGxhc3REYXkgPSBuZXcgRGF0ZShDYWxlbmRhclVJLnllYXIsIENhbGVuZGFyVUkubW9udGgrMSwgMCkuZ2V0VGltZSgpO1xuICAgIHN0b3JhZ2UuZ2V0TWVldGluZyhmaXJzdERheSwgbGFzdERheSk7XG4gIH1cbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG5cbmNhbGVuZGFyR3JpZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gIGlmIChldmVudC50YXJnZXQuY2xhc3NOYW1lID09PSBcImNhbGVuZGFyLWdyaWQtZGF5IGNtXCIpIHtcbiAgICBsZXQgc2F2ZURheSA9IGV2ZW50LnRhcmdldC5jaGlsZE5vZGVzWzBdLmlubmVyVGV4dDtcbiAgICBjYWxlbmRhckRheS55ZWFyID0gQ2FsZW5kYXJVSS55ZWFyO1xuICAgIGNhbGVuZGFyRGF5LmRpc3BsYXlDYWxlbmRhcihzYXZlRGF5LCBDYWxlbmRhclVJLm1vbnRoKTtcbiAgICBsZXQgZmlyc3REYXkgPSBuZXcgRGF0ZShDYWxlbmRhclVJLnllYXIsIENhbGVuZGFyVUkubW9udGgsIHNhdmVEYXksIDgpLmdldFRpbWUoKTtcbiAgICBsZXQgbGFzdERheSA9IG5ldyBEYXRlKENhbGVuZGFyVUkueWVhciwgQ2FsZW5kYXJVSS5tb250aCwgKE51bWJlcihzYXZlRGF5KSArMSksIDIyKS5nZXRUaW1lKCk7XG4gICAgc3RvcmFnZS5nZXRNZWV0aW5nKGZpcnN0RGF5LCBsYXN0RGF5KTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICAvLyBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJldmVudFwiICkge1xuICAvLyAgIG1lZXRpbmcub25lTWVldGluZygpO1xuICAvLyB9XG59KTtcblxuY2FsZW5kYXJEYXkuQ2FsZW5kYXJHcmlkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpWzBdID09PSBcImhvdXItZXZlbnRcIiAmJiBldmVudC50YXJnZXQuaW5uZXJUZXh0ID09PSBcIlwiKSB7XG4gICAgbGV0IGhvdXIgPSBwYXJzZUZsb2F0KGV2ZW50LnRhcmdldC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpWzFdLnNwbGl0KFwiaFwiKVsxXSk7XG4gICAgbWVldGluZy5vbmVNZWV0aW5nRGF5KGhvdXIpO1xuICB9XG4gIGUucHJldmVudERlZmF1bHQoKTtcbn0pO1xuXG5cbi8vIEFiaWxpdHkgdG8gc2VhcmNoIGZvciBhIGRhdGUuXG4vLyBcblxuY29uc3QgYWRkTWVldGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZXZlbnQnKTtcbmFkZE1lZXRpbmcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICBBZGRNZWV0aW4uaXNzZXQoKTtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXNzZXRzL2pzL2FwcC5qcyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbGVuZGFyIHtcblxuICBjb25zdHJ1Y3Rvcihtb250aCx5ZWFyKSB7XG4gICAgdGhpcy5tb250aCA9IG1vbnRoPT09IHVuZGVmaW5lZCA/IG5ldyBEYXRlKCkuZ2V0TW9udGgoKSA6IG1vbnRoO1xuICAgIHRoaXMueWVhciA9IHllYXI9PT0gdW5kZWZpbmVkID8gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpIDogeWVhcjtcbiAgICB0aGlzLmNhbGVuZGFyR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhci1ncmlkJyk7XG4gICAgdGhpcy5jYWxlbmRhclRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaDEnKTtcbiAgICB0aGlzLm1vbnRocyA9IFsnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlciddO1xuICB9XG5cbiAgc3RhdGljIGdldE1vbmRheShkKSB7XG5cbiAgICBkID0gbmV3IERhdGUoZCk7XG4gICAgdmFyIGRheSA9IGQuZ2V0RGF5KCksXG4gICAgICAgIGRpZmYgPSBkLmdldERhdGUoKSAtIGRheSArIChkYXkgPT0gMCA/IC02OjEpOyAvLyBhZGp1c3Qgd2hlbiBkYXkgaXMgc3VuZGF5XG4gICAgcmV0dXJuIG5ldyBEYXRlKGQuc2V0RGF0ZShkaWZmKSk7XG4gIH1cblxuICBkYXlPZkNhbGVuZGFyKG1vbnRoID0gdGhpcy5tb250aCwgeWVhciA9IHRoaXMueWVhcikge1xuICAgIHRoaXMudGl0bGVNb250aCgpO1xuICAgIGxldCBmaXJzdERhdGU9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKSxcbiAgICBsYXN0RGF0ZT0gbmV3IERhdGUoeWVhciwgbW9udGgrMSwgMCksXG4gICAgZmlyc3RNb25kYXkgPSBDYWxlbmRhci5nZXRNb25kYXkoZmlyc3REYXRlKS5nZXREYXRlKCk7XG5cbiAgICBjb25zdCBmaXJzdERhdGVPZk1vbnRoID0gZmlyc3REYXRlLmdldERhdGUoKTtcbiAgICBjb25zdCBlbmRPZlByZXZNb250aCA9IGxhc3REYXRlLmdldERhdGUoKTtcbiAgICBjb25zdCBlbmRPZkN1cnJlbnRNb250aCA9IDcgLSBsYXN0RGF0ZS5nZXREYXkoKTtcblxuICAgIGxldCBhbGxEYXRlID0gW2ZpcnN0RGF0ZU9mTW9udGgsIGVuZE9mUHJldk1vbnRoLCBlbmRPZkN1cnJlbnRNb250aF07XG4gICAgbGV0IGNoZWNrRmlyc3RNb250aCA9IGZhbHNlO1xuICAgIGFsbERhdGUuZm9yRWFjaCgoZGF0ZSkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gY2hlY2tGaXJzdE1vbnRoID09PSBmYWxzZSA/IGZpcnN0TW9uZGF5IDogMTsgaSA8PSBkYXRlOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmRpc3BsYXlDYWxlbmRhcihpLCBkYXRlICE9PSBhbGxEYXRlWzFdIHx8IGNoZWNrRmlyc3RNb250aCA9PT0gZmFsc2UgPyAnZmFkZU1vbnRoJyA6ICdjbScpO1xuICAgICAgICAgIGlmIChjaGVja0ZpcnN0TW9udGggPT09IHRydWUgJiYgaSA9PT0gbmV3IERhdGUoKS5nZXREYXRlKCkgJiYgbW9udGggPT09IG5ldyBEYXRlKCkuZ2V0TW9udGgoKSkge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmNtIC5kYXkke2l9YCkuc3R5bGUuYmFja2dyb3VuZCA9IFwiIzAwRTY3NlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjaGVja0ZpcnN0TW9udGggPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgfVxuICBcbiAgZGlzcGxheUNhbGVuZGFyKGRheSwgYm0pIHtcbiAgICBcbiAgICBjb25zdCBjcmVhdGVEYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjcmVhdGVEYXkuY2xhc3NOYW1lID0gYGNhbGVuZGFyLWdyaWQtZGF5ICR7Ym19YDtcbiAgICBjb25zdCBkYXlUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGF5VGV4dC5jbGFzc05hbWUgPSBgZGF5dGV4dCBkYXkke2RheX1gO1xuICAgIGRheVRleHQuaW5uZXJUZXh0ID0gZGF5O1xuICAgIGNyZWF0ZURheS5hcHBlbmRDaGlsZChkYXlUZXh0KTtcbiAgICB0aGlzLmNhbGVuZGFyR3JpZC5hcHBlbmRDaGlsZChjcmVhdGVEYXkpO1xuICB9XG5cbiAgcmVtb3ZlQ2FsZW5kYXIoKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FsZW5kYXItZ3JpZCcpLmlubmVySFRNTCA9IFwiXCI7XG4gICAgfVxuXG4gIG5leHRNb250aCgpIHtcbiAgXG4gICAgICBpZiAodGhpcy5tb250aCA8IDExKSB7XG4gICAgICAgIHRoaXMubW9udGgrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMueWVhcisrO1xuICAgICAgICB0aGlzLm1vbnRoID0gMDtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVtb3ZlQ2FsZW5kYXIoKTtcbiAgICAgIHRoaXMuZGF5T2ZDYWxlbmRhcih0aGlzLm1vbnRoLCB0aGlzLnllYXIpO1xuICAgIH1cblxuICBwcmV2TW9udGgoKSB7XG5cbiAgICBpZiAodGhpcy5tb250aCA+IDApIHtcbiAgICAgIHRoaXMubW9udGgtLTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy55ZWFyLS07XG4gICAgICB0aGlzLm1vbnRoID0gMTE7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQ2FsZW5kYXIoKTtcbiAgICB0aGlzLmRheU9mQ2FsZW5kYXIodGhpcy5tb250aCwgdGhpcy55ZWFyKTtcbiAgfVxuXG4gIHRpdGxlTW9udGgoKSB7XG4gICAgXG4gICAgY29uc3QgaDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoMScpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaDEuaW5uZXJUZXh0ID0gXCJcIjtcbiAgICAgIGgxLmlubmVyVGV4dCA9IHRoaXMubW9udGhzWyh0aGlzLm1vbnRoKV0gKyAnICcgKyB0aGlzLnllYXI7XG4gICAgfSwgNTApO1xuICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXNzZXRzL2pzL3Z1ZS9DYWxlbmRhck1vbnRoLmpzIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FsZW5kYXJEYXkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG4gICAgdGhpcy5oMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gxJyk7XG4gICAgdGhpcy5tb250aHMgPSBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXTtcbiAgICB0aGlzLkNhbGVuZGFyR3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuQ2FsZW5kYXJHcmlkLmNsYXNzTmFtZSA9ICdjYWxlbmRhci1ncmlkLWhvdXJzJztcbiAgICAvLyB0aGlzLkNhbGVuZGFyR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhci1ncmlkLWhvdXJzJyk7XG4gICAgdGhpcy5pc3NldCA9IGZhbHNlO1xuICAgIHRoaXMueWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbiAgfVxuXG4gIGRpc3BsYXlDYWxlbmRhcihkYXksIG1vbnRoKSB7IFxuICAgIHRoaXMuZGF5ID0gTnVtYmVyKGRheSk7XG4gICAgdGhpcy5tb250aCA9IG1vbnRoO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5tYWluLmlubmVySFRNTCA9ICcnO1xuICAgIH0sIDUwKTtcbiAgICB0aGlzLmgxLnN0eWxlLmFuaW1hdGlvbiA9IFwiMTAwbXMgZ3JpZCBjdWJpYy1iZXppZXIoLjI1LCAuOCwgLjI1LCAxKVwiO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5oMS5pbm5lclRleHQgPSBDYWxlbmRhckRheS5vcmRpbmFsX3N1ZmZpeF9vZihOdW1iZXIoZGF5KSkgKyAnICcgKyB0aGlzLm1vbnRoc1ttb250aF0gKyAnICcgKyB0aGlzLnllYXI7XG4gICAgfSwgMTAwKTtcblxuICAgIGZvciAobGV0IGkgPSA4OyBpIDw9IDIyOyBpID0gaSArIDAuNSkge1xuICAgIGxldCByZXBsYWNlRG90ID0gU3RyaW5nKGkpLnJlcGxhY2UoL1xcLi9nLCctJyk7XG4gICAgbGV0IGhvdXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaG91cnMuY2xhc3NOYW1lID0gXCJob3Vyc1wiO1xuICAgIGxldCBob3VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaG91ci5jbGFzc05hbWUgPSBcImhvdXJcIjtcbiAgICBsZXQgaG91ckV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaG91ckV2ZW50LmNsYXNzTmFtZSA9IGBob3VyLWV2ZW50IGgke3JlcGxhY2VEb3R9YDtcbiAgICBpZiAoaSAlIDEgPT09IDApIHtcbiAgICAgIGlmIChpIDwgMTIpIHtcbiAgICAgICAgaG91ci5pbm5lclRleHQgPSBgJHtpfWFtYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhvdXIuaW5uZXJUZXh0ID0gYCR7aX1wbWA7XG4gICAgICB9XG4gICAgICBob3VyRXZlbnQuc3R5bGUuYm9yZGVyVG9wID0gXCIxcHggc29saWQgcmdiYSgxODksMTg5LDE4OSwgMC40KVwiXG4gICAgfVxuXG4gICAgaG91cnMuYXBwZW5kQ2hpbGQoaG91cik7XG4gICAgaG91cnMuYXBwZW5kQ2hpbGQoaG91ckV2ZW50KTtcbiAgICB0aGlzLkNhbGVuZGFyR3JpZC5hcHBlbmRDaGlsZChob3Vycyk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmFwcGVuZENoaWxkKHRoaXMuQ2FsZW5kYXJHcmlkKTtcbiAgICB0aGlzLmlzc2V0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgb3JkaW5hbF9zdWZmaXhfb2YoaSkge1xuICAgIHZhciBqID0gaSAlIDEwLFxuICAgICAgICBrID0gaSAlIDEwMDtcbiAgICBpZiAoaiA9PSAxICYmIGsgIT0gMTEpIHtcbiAgICAgICAgcmV0dXJuIGkgKyBcInN0XCI7XG4gICAgfVxuICAgIGlmIChqID09IDIgJiYgayAhPSAxMikge1xuICAgICAgICByZXR1cm4gaSArIFwibmRcIjtcbiAgICB9XG4gICAgaWYgKGogPT0gMyAmJiBrICE9IDEzKSB7XG4gICAgICAgIHJldHVybiBpICsgXCJyZFwiO1xuICAgIH1cbiAgICByZXR1cm4gaSArIFwidGhcIjtcbiAgfVxuXG4gIG5leHREYXkoKSB7XG5cbiAgICBsZXQgc2F2ZSA9IG5ldyBEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCArIDEsIDApO1xuICAgIHNhdmUgPSBzYXZlLmdldERhdGUoKTtcbiAgICBpZiAodGhpcy5kYXkgPT09IHNhdmUpIHtcbiAgICAgIHRoaXMuZGF5ID0gMTtcblxuICAgICAgaWYgKHRoaXMubW9udGggPCAxMSkge1xuICAgICAgICB0aGlzLm1vbnRoKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnllYXIrKztcbiAgICAgICAgdGhpcy5tb250aCA9IDA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGF5Kys7XG4gICAgfVxuICAgIHRoaXMuQ2FsZW5kYXJHcmlkLmlubmVySFRNTCA9ICcnO1xuICAgIHRoaXMuZGlzcGxheUNhbGVuZGFyKHRoaXMuZGF5LCB0aGlzLm1vbnRoKTtcbiAgfVxuXG4gIHByZXZEYXkoKSB7XG4gICAgaWYgKHRoaXMuZGF5ID09PSAxKSB7XG5cbiAgICAgIGlmICh0aGlzLm1vbnRoID4gMCkge1xuICAgICAgICB0aGlzLm1vbnRoLS07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnllYXItLTtcbiAgICAgICAgdGhpcy5tb250aCA9IDExO1xuICAgICAgfVxuICAgICAgbGV0IHNhdmUgPSBuZXcgRGF0ZSh0aGlzLnllYXIsIHRoaXMubW9udGggKyAxLCAwKTtcbiAgICAgIHRoaXMuZGF5ID0gc2F2ZS5nZXREYXRlKCk7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmRheSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGF5LS07XG4gICAgfVxuICAgIHRoaXMuQ2FsZW5kYXJHcmlkLmlubmVySFRNTCA9ICcnO1xuICAgIHRoaXMuZGlzcGxheUNhbGVuZGFyKHRoaXMuZGF5LCB0aGlzLm1vbnRoKTtcbiAgfVxuXG4gIC8vIGV2ZW50VUkoc3RhcnQsIGVuZCkge1xuICAvLyAgIGxldCBzdGFydEhvdXIgPSBuZXcgRGF0ZShzdGFydCkuZ2V0SG91cnMoKTtcbiAgLy8gICBsZXQgZW5kSG91ciA9IG5ldyBEYXRlKGVuZCkuZ2V0SG91cnMoKTtcblxuICAvLyB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hc3NldHMvanMvdnVlL0NhbGVuZGFyRGF5LmpzIiwiaW1wb3J0IE1lZXRpbmcgZnJvbSBcIi4uL3Z1ZS9NZWV0aW5nXCI7XG5sZXQgbSA9IG5ldyBNZWV0aW5nO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcmFnZSB7XG5cbiAgZ2V0KHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgZmV0Y2godXJsKVxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbihkYXRhID0+IHJlc29sdmUoZGF0YSkpXG4gICAgICAuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcbiAgXG4gICAgfSk7XG4gIH1cblxuICBwb3N0KHVybCwgZGF0YSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kIDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzIDoge1xuICAgICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKGRhdGEgPT4gcmVzb2x2ZShkYXRhKSlcbiAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xuICAgIH0pOyBcbiAgfVxuXG4gIHB1dCh1cmwsZGF0YSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpID0+IHtcbiAgICAgIGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2QgOiAnUFVUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbiAoZGF0YSA9PiByZXNvbHZlKGRhdGEpKVxuICAgICAgICAuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIERlbGV0ZVxuICBkZWxldGUodXJsLCBkYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xuICAgICAgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZCA6ICdERUxFVEUnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4gKGRhdGEgPT4gcmVzb2x2ZSgnRGVsZXRlZCcpKVxuICAgICAgICAuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcbiAgICogQHBhcmFtIHtpbnR9IGZyb20gXG4gICAqIEBwYXJhbSB7aW50fSB0byBcbiAgICogQHJldHVybiB7QXJyYXkub2JqZWN0fSBcbiAgICovXG4gIGdldE1lZXRpbmcoZnJvbSwgdG8pIHtcbiAgICB0aGlzLmdldChgaHR0cHM6Ly9jcnVkLW1lZXRpbmdzLmF6dXJld2Vic2l0ZXMubmV0L2FwaS9nZXRBbGw/c3RhcnQ9JHtmcm9tfSZlbmQ9JHt0b31gKVxuICAgIC50aGVuKCAocmVzcG9uc2UpID0+IHtcbiAgICAgIGlmICh0byAtIGZyb20gPT09IDEzNjgwMDAwMCkge1xuICAgICAgICByZXNwb25zZS5yZXMuZm9yRWFjaCgocmVzKSA9PiB7XG4gICAgICAgIG0uZGlzcGxheU1lZXRpbmdIb3VycyhyZXMpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3BvbnNlLnJlcy5mb3JFYWNoKCAocmVzKSA9PiB7XG4gICAgICAgIG0uZGlzcGxheU1lZXRpbmcocmVzKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goIChlcnIpID0+IHtcbiAgICAgICAgcmV0dXJuIGVycjtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZE1lZXRpbmcoZGF0YSkge1xuXG4gICAgdGhpcy5odHRwLnBvc3QoJ2h0dHBzOi8vY3J1ZC1tZWV0aW5ncy5henVyZXdlYnNpdGVzLm5ldC9hcGkvYWRkP2NvZGU9Sk5JMGxMczFINTNVZzFQZUVJMzNWNTBQOEFWRVI1Y1R6YXVycW0wcUk5OGQwSXVsbTBzU2p3PT0nLCBkYXRhKVxuICAgIC50aGVuKGRhdGEgPT4gZGF0YSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuICB9XG5cbiAgdXBkYXRlTWVldGluZyh0aW1lLCBkYXRhKSB7XG5cbiAgICB0aGlzLmh0dHAucHV0KCdodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdXNlcnMvMScsIGRhdGEpXG4gICAgLnRoZW4oZGF0YSA9PiBjb25zb2xlLmxvZyhkYXRhKSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuICB9XG5cbiAgZGVsZXRlTWVldGluZyhpZCkge1xuICAgIHRoaXMuaHR0cC5kZWxldGUoJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS91c2Vycy8xJylcbiAgICAudGhlbihkYXRhID0+IGNvbnNvbGUubG9nKGRhdGEpKVxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH1cbn1cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXNzZXRzL2pzL21vZGVsL1N0b3JhZ2UuanMiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBZGRNZWV0aW5nIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5uYXZiYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyJyk7XG4gICAgdGhpcy5oZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9udGgnKTtcbiAgICB0aGlzLmJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZXZlbnQnKTtcbiAgICB0aGlzLmxvZ2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luJyk7XG4gICAgdGhpcy5sb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW4tbG9naW4nKTtcbiAgICB0aGlzLnNpZ24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW4tc2lnbnVwJyk7XG4gICAgdGhpcy5mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgIHRoaXMuYWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1ldmVudCcpO1xuICB9XG5cbiAgaXNzZXQoKSB7XG4gICAgdGhpcy5uYXZiYXIuc3R5bGUuaGVpZ2h0ID0gXCIzMCVcIjtcbiAgICB0aGlzLmFkZC5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZSg0NWRlZylcIjtcbiAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2Fzc2V0cy9qcy92dWUvQWRkTWVldGluZy5qcyJdLCJzb3VyY2VSb290IjoiIn0=